{"ast":null,"code":"var _jsxFileName = \"/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { CheckCircleIcon, ArrowUpOnSquareIcon, XMarkIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst steps = [{\n  key: 'companyName',\n  label: 'Company Name & Logo',\n  description: 'Set your legal company name and upload your logo.',\n  fields: ['name', 'logo'],\n  uploadType: 'logo'\n}, {\n  key: 'companyNumber',\n  label: 'Company Number & Incorporation Date',\n  description: 'Record the Companies House number and date of incorporation.',\n  fields: ['company_number', 'incorporation_date']\n}, {\n  key: 'registeredOffice',\n  label: 'Registered Office & Contact Info',\n  description: 'Store your legal address, website, and contact emails.',\n  fields: ['registered_office', 'website', 'contact_email', 'linkedin_profile']\n}, {\n  key: 'foundersAgreement',\n  label: 'Founders Agreement',\n  description: 'Upload your signed founders agreement. If you don\\'t have one, you can get a template in the legal section.',\n  fields: ['founders_agreement'],\n  uploadType: 'document',\n  uploadNote: 'A founders agreement sets out the rights and responsibilities of each founder. If you don\\'t have one, get a template in the Legal section.'\n}\n// ... add more steps as needed ...\n];\nconst FoundationDocuments = () => {\n  _s();\n  const {\n    currentOrganization\n  } = useAuth();\n  const [showWizard, setShowWizard] = useState(false);\n  const [stepIndex, setStepIndex] = useState(0);\n  const [form, setForm] = useState({\n    name: '',\n    logoUrl: '',\n    company_number: '',\n    incorporation_date: '',\n    registered_office: '',\n    website: '',\n    contact_email: '',\n    linkedin_profile: '',\n    founders_agreement: ''\n  });\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef();\n\n  // Restore checklist state and logic\n  const [checklist, setChecklist] = useState([{\n    step: 'Company Name & Logo',\n    description: 'Set your legal company name and upload your logo.',\n    hasUpload: true,\n    uploadType: 'logo',\n    completed: false,\n    popup: 'companyName'\n  }, {\n    step: 'Company Number & Incorporation Date',\n    description: 'Record the Companies House number and date of incorporation.',\n    completed: false,\n    popup: 'companyNumber'\n  }, {\n    step: 'Registered Office & Contact Info',\n    description: 'Store your legal address, website, and contact emails.',\n    completed: false,\n    popup: 'office'\n  }, {\n    step: 'Articles of Association',\n    description: \"Upload your articles and confirm they're accessible to the team.\",\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Shareholders & Cap Table',\n    description: 'Ensure initial shareholders are logged and cap table is added.',\n    hasLink: true,\n    linkText: 'View Cap Table',\n    linkTo: '/cap-table',\n    completed: false\n  }, {\n    step: 'Founder Agreements',\n    description: 'Upload signed founder agreements or SAFEs if applicable.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'IP Assignment',\n    description: 'Confirm IP assignment agreements are in place for founders and early team.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'NDAs',\n    description: 'Add template NDAs for future use and upload any executed ones.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Business Bank Account',\n    description: 'Record banking provider and date account was opened.',\n    completed: false,\n    popup: 'bank'\n  }, {\n    step: 'VAT Registration',\n    description: 'Track your VAT registration number and effective date.',\n    completed: false,\n    popup: 'vat'\n  }, {\n    step: 'Insurance',\n    description: 'Upload insurance docs (public liability, employer liability, cyber etc).',\n    hasUpload: true,\n    uploadType: 'policy',\n    completed: false\n  }, {\n    step: 'Board Structure',\n    description: 'Define board members and roles. Upload board meeting template.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Org Chart',\n    description: 'Add your org chart for internal visibility.',\n    hasUpload: true,\n    uploadType: 'image/file',\n    completed: false\n  }, {\n    step: \"Founders' Equity Vesting\",\n    description: \"Record any equity vesting schedules in place.\",\n    hasLink: true,\n    linkText: 'Link to Cap Table',\n    linkTo: '/cap-table',\n    completed: false\n  }, {\n    step: 'Compliance Deadlines',\n    description: 'Add reminders for annual filings, confirmation statements, and accounts.',\n    hasLink: true,\n    linkText: 'Add to calendar',\n    linkTo: '#',\n    completed: false\n  }]);\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setForm(f => ({\n          ...f,\n          name: data.name || '',\n          logoUrl: data.logo_url || '',\n          company_number: data.company_number || '',\n          incorporation_date: data.incorporation_date || '',\n          registered_office: data.registered_office || '',\n          website: data.website || '',\n          contact_email: data.contact_email || '',\n          linkedin_profile: data.linkedin_profile || '',\n          founders_agreement: data.founders_agreement || ''\n        }));\n        setChecklist(prev => prev.map((item, idx) => {\n          switch (idx) {\n            case 0:\n              // Company Name & Logo\n              return {\n                ...item,\n                completed: !!(data.name && data.logo_url)\n              };\n            case 1:\n              // Company Number & Incorporation Date\n              return {\n                ...item,\n                completed: !!(data.company_number && data.incorporation_date)\n              };\n            case 2:\n              // Registered Office & Contact Info\n              return {\n                ...item,\n                completed: !!(data.registered_office && data.website && data.contact_email)\n              };\n            case 8:\n              // Business Bank Account\n              return {\n                ...item,\n                completed: !!(data.bank_provider && data.bank_account_opened)\n              };\n            case 9:\n              // VAT Registration\n              return {\n                ...item,\n                completed: !!data.vat_number\n              };\n            default:\n              return item;\n          }\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n  const handleInput = (field, value) => {\n    setForm(f => ({\n      ...f,\n      [field]: value\n    }));\n  };\n  const handleLogoUpload = async e => {\n    const file = e.target.files[0];\n    if (!file || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('company-logos').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      setError('Error uploading logo: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const {\n      data: publicUrlData,\n      error: urlError\n    } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !(publicUrlData !== null && publicUrlData !== void 0 && publicUrlData.publicUrl)) {\n      setError('Error getting logo URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({\n      ...f,\n      logoUrl: publicUrlData.publicUrl\n    }));\n    setSaving(false);\n  };\n  const handleFileUpload = async (field, e) => {\n    const file = e.target.files[0];\n    if (!file || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/${field}.${fileExt}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('company-foundations').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      setError('Error uploading file: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const {\n      data: publicUrlData,\n      error: urlError\n    } = supabase.storage.from('company-foundations').getPublicUrl(filePath);\n    if (urlError || !(publicUrlData !== null && publicUrlData !== void 0 && publicUrlData.publicUrl)) {\n      setError('Error getting file URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({\n      ...f,\n      [field]: publicUrlData.publicUrl\n    }));\n    setSaving(false);\n  };\n\n  // When a step is completed in the wizard, update the checklist\n  const markStepComplete = stepIdx => {\n    setChecklist(prev => prev.map((item, idx) => idx === stepIdx ? {\n      ...item,\n      completed: true\n    } : item));\n  };\n  const handleNext = async () => {\n    setSaving(true);\n    setError('');\n    const step = steps[stepIndex];\n    const payload = {\n      organization_id: currentOrganization.organization_id\n    };\n    step.fields.forEach(field => {\n      if (field === 'logo') {\n        payload['logo_url'] = form.logoUrl;\n      } else {\n        payload[field] = form[field];\n      }\n    });\n    try {\n      await upsertCompanyProfile(payload);\n      markStepComplete(stepIndex);\n      setStepIndex(i => i + 1);\n    } catch (err) {\n      setError(err.message || 'Failed to save.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleBack = () => {\n    setStepIndex(i => Math.max(0, i - 1));\n    setError('');\n  };\n  const closeWizard = () => {\n    setShowWizard(false);\n    setStepIndex(0);\n    setError('');\n  };\n\n  // Validation for Save & Next\n  const isStepValid = (() => {\n    const step = steps[stepIndex];\n    return step.fields.every(field => {\n      if (field === 'logo') return !!form.logoUrl;\n      return form[field] && form[field].toString().trim() !== '';\n    });\n  })();\n\n  // Modal UI\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow border border-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 py-4 border-b border-gray-200 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-gray-900\",\n        children: \"Company Setup Wizard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-blue-600 text-sm font-semibold hover:underline\",\n        onClick: () => setShowWizard(true),\n        children: \"Start with Company Name \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), showWizard && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 bg-black bg-opacity-40\",\n        onClick: closeWizard\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative h-full w-full sm:w-[40vw] max-w-xl bg-white shadow-2xl p-0 flex flex-col transform transition-transform duration-500 ease-in-out translate-x-0\",\n        style: {\n          right: 0\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl z-10\",\n          onClick: closeWizard,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-10 flex flex-col items-center justify-center h-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-8 w-full text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg text-gray-500 mb-2\",\n              children: [\"Step \", stepIndex + 1, \" of \", steps.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-3xl font-extrabold text-gray-900 mb-2\",\n              style: {\n                fontFamily: 'Inter, sans-serif'\n              },\n              children: steps[stepIndex].label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-md text-gray-600 mb-6 max-w-md mx-auto\",\n              children: steps[stepIndex].description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), steps[stepIndex].fields.map(field => {\n            if (field === 'name') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Company Name\",\n                value: form.name,\n                onChange: e => handleInput('name', e.target.value),\n                autoFocus: true\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'logo') {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-center mb-6 w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-28 h-28 rounded-full flex items-center justify-center bg-gray-100 mb-4 overflow-hidden\",\n                  children: form.logoUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: form.logoUrl,\n                    alt: \"Logo\",\n                    className: \"object-contain w-full h-full\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-400 text-4xl font-bold\",\n                    children: \"Logo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  ref: fileInputRef,\n                  onChange: handleLogoUpload,\n                  className: \"hidden\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => fileInputRef.current && fileInputRef.current.click(),\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\",\n                  children: form.logoUrl ? 'Change Logo' : 'Upload Logo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this)]\n              }, field, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'company_number') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Company Number\",\n                value: form.company_number,\n                onChange: e => handleInput('company_number', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'incorporation_date') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                value: form.incorporation_date,\n                onChange: e => handleInput('incorporation_date', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'registered_office') {\n              return /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Registered Office Address\",\n                value: form.registered_office,\n                onChange: e => handleInput('registered_office', e.target.value),\n                rows: 3\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'website') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"url\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Website\",\n                value: form.website,\n                onChange: e => handleInput('website', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'contact_email') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Contact Email\",\n                value: form.contact_email,\n                onChange: e => handleInput('contact_email', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'linkedin_profile') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"url\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"LinkedIn Profile\",\n                value: form.linkedin_profile,\n                onChange: e => handleInput('linkedin_profile', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'founders_agreement') {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-center mb-6 w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-md font-semibold text-gray-700 mb-2\",\n                  children: \"Upload Founders Agreement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"application/pdf,.doc,.docx\",\n                  onChange: e => handleFileUpload('founders_agreement', e),\n                  className: \"mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 23\n                }, this), form.founders_agreement && /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: form.founders_agreement,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"text-blue-600 underline text-sm mb-2\",\n                  children: \"View Uploaded File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 mt-2 text-center\",\n                  children: [\"A founders agreement sets out the rights and responsibilities of each founder.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 103\n                  }, this), \"If you don't have one, get a template in the \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-purple-600\",\n                    children: \"Legal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 75\n                  }, this), \" section.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this)]\n              }, field, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 21\n              }, this);\n            }\n            return null;\n          }), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-600 text-sm mt-2\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center w-full mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleBack,\n              className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n              disabled: stepIndex === 0 || saving,\n              children: \"Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleNext,\n              className: `px-6 py-2 rounded-md text-white text-lg font-semibold transition-colors ${isStepValid ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-300 cursor-not-allowed'}`,\n              disabled: !isStepValid || saving,\n              children: stepIndex === steps.length - 1 ? 'Finish' : 'Save & Next'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n};\n_s(FoundationDocuments, \"C0Kf7WrcZf3UWqKPMY0AJdT0KE4=\", false, function () {\n  return [useAuth];\n});\n_c = FoundationDocuments;\nexport default FoundationDocuments;\nvar _c;\n$RefreshReg$(_c, \"FoundationDocuments\");","map":{"version":3,"names":["React","useState","useEffect","useRef","CheckCircleIcon","ArrowUpOnSquareIcon","XMarkIcon","useAuth","getCompanyProfile","upsertCompanyProfile","supabase","jsxDEV","_jsxDEV","steps","key","label","description","fields","uploadType","uploadNote","FoundationDocuments","_s","currentOrganization","showWizard","setShowWizard","stepIndex","setStepIndex","form","setForm","name","logoUrl","company_number","incorporation_date","registered_office","website","contact_email","linkedin_profile","founders_agreement","saving","setSaving","error","setError","fileInputRef","checklist","setChecklist","step","hasUpload","completed","popup","hasLink","linkText","linkTo","fetchProfile","organization_id","data","f","logo_url","prev","map","item","idx","bank_provider","bank_account_opened","vat_number","handleInput","field","value","handleLogoUpload","e","file","target","files","fileExt","split","pop","filePath","uploadError","storage","from","upload","upsert","message","publicUrlData","urlError","getPublicUrl","publicUrl","handleFileUpload","markStepComplete","stepIdx","handleNext","payload","forEach","i","err","handleBack","Math","max","closeWizard","isStepValid","every","toString","trim","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","right","length","fontFamily","type","placeholder","onChange","autoFocus","src","alt","accept","ref","current","click","rows","href","rel","disabled","_c","$RefreshReg$"],"sources":["/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CheckCircleIcon, ArrowUpOnSquareIcon, XMarkIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\n\nconst steps = [\n  {\n    key: 'companyName',\n    label: 'Company Name & Logo',\n    description: 'Set your legal company name and upload your logo.',\n    fields: ['name', 'logo'],\n    uploadType: 'logo',\n  },\n  {\n    key: 'companyNumber',\n    label: 'Company Number & Incorporation Date',\n    description: 'Record the Companies House number and date of incorporation.',\n    fields: ['company_number', 'incorporation_date'],\n  },\n  {\n    key: 'registeredOffice',\n    label: 'Registered Office & Contact Info',\n    description: 'Store your legal address, website, and contact emails.',\n    fields: ['registered_office', 'website', 'contact_email', 'linkedin_profile'],\n  },\n  {\n    key: 'foundersAgreement',\n    label: 'Founders Agreement',\n    description: 'Upload your signed founders agreement. If you don\\'t have one, you can get a template in the legal section.',\n    fields: ['founders_agreement'],\n    uploadType: 'document',\n    uploadNote: 'A founders agreement sets out the rights and responsibilities of each founder. If you don\\'t have one, get a template in the Legal section.'\n  },\n  // ... add more steps as needed ...\n];\n\nconst FoundationDocuments = () => {\n  const { currentOrganization } = useAuth();\n  const [showWizard, setShowWizard] = useState(false);\n  const [stepIndex, setStepIndex] = useState(0);\n  const [form, setForm] = useState({\n    name: '',\n    logoUrl: '',\n    company_number: '',\n    incorporation_date: '',\n    registered_office: '',\n    website: '',\n    contact_email: '',\n    linkedin_profile: '',\n    founders_agreement: '',\n  });\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef();\n\n  // Restore checklist state and logic\n  const [checklist, setChecklist] = useState([\n    { step: 'Company Name & Logo', description: 'Set your legal company name and upload your logo.', hasUpload: true, uploadType: 'logo', completed: false, popup: 'companyName' },\n    { step: 'Company Number & Incorporation Date', description: 'Record the Companies House number and date of incorporation.', completed: false, popup: 'companyNumber' },\n    { step: 'Registered Office & Contact Info', description: 'Store your legal address, website, and contact emails.', completed: false, popup: 'office' },\n    { step: 'Articles of Association', description: \"Upload your articles and confirm they're accessible to the team.\", hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Shareholders & Cap Table', description: 'Ensure initial shareholders are logged and cap table is added.', hasLink: true, linkText: 'View Cap Table', linkTo: '/cap-table', completed: false },\n    { step: 'Founder Agreements', description: 'Upload signed founder agreements or SAFEs if applicable.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'IP Assignment', description: 'Confirm IP assignment agreements are in place for founders and early team.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'NDAs', description: 'Add template NDAs for future use and upload any executed ones.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Business Bank Account', description: 'Record banking provider and date account was opened.', completed: false, popup: 'bank' },\n    { step: 'VAT Registration', description: 'Track your VAT registration number and effective date.', completed: false, popup: 'vat' },\n    { step: 'Insurance', description: 'Upload insurance docs (public liability, employer liability, cyber etc).', hasUpload: true, uploadType: 'policy', completed: false },\n    { step: 'Board Structure', description: 'Define board members and roles. Upload board meeting template.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Org Chart', description: 'Add your org chart for internal visibility.', hasUpload: true, uploadType: 'image/file', completed: false },\n    { step: \"Founders' Equity Vesting\", description: \"Record any equity vesting schedules in place.\", hasLink: true, linkText: 'Link to Cap Table', linkTo: '/cap-table', completed: false },\n    { step: 'Compliance Deadlines', description: 'Add reminders for annual filings, confirmation statements, and accounts.', hasLink: true, linkText: 'Add to calendar', linkTo: '#', completed: false },\n  ]);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!currentOrganization?.organization_id) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setForm(f => ({\n          ...f,\n          name: data.name || '',\n          logoUrl: data.logo_url || '',\n          company_number: data.company_number || '',\n          incorporation_date: data.incorporation_date || '',\n          registered_office: data.registered_office || '',\n          website: data.website || '',\n          contact_email: data.contact_email || '',\n          linkedin_profile: data.linkedin_profile || '',\n          founders_agreement: data.founders_agreement || '',\n        }));\n        setChecklist((prev) => prev.map((item, idx) => {\n          switch (idx) {\n            case 0: // Company Name & Logo\n              return { ...item, completed: !!(data.name && data.logo_url) };\n            case 1: // Company Number & Incorporation Date\n              return { ...item, completed: !!(data.company_number && data.incorporation_date) };\n            case 2: // Registered Office & Contact Info\n              return { ...item, completed: !!(data.registered_office && data.website && data.contact_email) };\n            case 8: // Business Bank Account\n              return { ...item, completed: !!(data.bank_provider && data.bank_account_opened) };\n            case 9: // VAT Registration\n              return { ...item, completed: !!data.vat_number };\n            default:\n              return item;\n          }\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n\n  const handleInput = (field, value) => {\n    setForm(f => ({ ...f, [field]: value }));\n  };\n\n  const handleLogoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file || !currentOrganization?.organization_id) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const { error: uploadError } = await supabase.storage.from('company-logos').upload(filePath, file, { upsert: true });\n    if (uploadError) {\n      setError('Error uploading logo: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const { data: publicUrlData, error: urlError } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !publicUrlData?.publicUrl) {\n      setError('Error getting logo URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({ ...f, logoUrl: publicUrlData.publicUrl }));\n    setSaving(false);\n  };\n\n  const handleFileUpload = async (field, e) => {\n    const file = e.target.files[0];\n    if (!file || !currentOrganization?.organization_id) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/${field}.${fileExt}`;\n    const { error: uploadError } = await supabase.storage.from('company-foundations').upload(filePath, file, { upsert: true });\n    if (uploadError) {\n      setError('Error uploading file: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const { data: publicUrlData, error: urlError } = supabase.storage.from('company-foundations').getPublicUrl(filePath);\n    if (urlError || !publicUrlData?.publicUrl) {\n      setError('Error getting file URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({ ...f, [field]: publicUrlData.publicUrl }));\n    setSaving(false);\n  };\n\n  // When a step is completed in the wizard, update the checklist\n  const markStepComplete = (stepIdx) => {\n    setChecklist(prev => prev.map((item, idx) => idx === stepIdx ? { ...item, completed: true } : item));\n  };\n\n  const handleNext = async () => {\n    setSaving(true);\n    setError('');\n    const step = steps[stepIndex];\n    const payload = { organization_id: currentOrganization.organization_id };\n    step.fields.forEach(field => {\n      if (field === 'logo') {\n        payload['logo_url'] = form.logoUrl;\n      } else {\n        payload[field] = form[field];\n      }\n    });\n    try {\n      await upsertCompanyProfile(payload);\n      markStepComplete(stepIndex);\n      setStepIndex(i => i + 1);\n    } catch (err) {\n      setError(err.message || 'Failed to save.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleBack = () => {\n    setStepIndex(i => Math.max(0, i - 1));\n    setError('');\n  };\n\n  const closeWizard = () => {\n    setShowWizard(false);\n    setStepIndex(0);\n    setError('');\n  };\n\n  // Validation for Save & Next\n  const isStepValid = (() => {\n    const step = steps[stepIndex];\n    return step.fields.every(field => {\n      if (field === 'logo') return !!form.logoUrl;\n      return form[field] && form[field].toString().trim() !== '';\n    });\n  })();\n\n  // Modal UI\n  return (\n    <div className=\"bg-white rounded-lg shadow border border-gray-200\">\n      <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n        <h2 className=\"text-xl font-bold text-gray-900\">Company Setup Wizard</h2>\n        <button\n          className=\"text-blue-600 text-sm font-semibold hover:underline\"\n          onClick={() => setShowWizard(true)}\n        >\n          Start with Company Name &rarr;\n        </button>\n      </div>\n      {showWizard && (\n        <div className=\"fixed inset-0 z-50 flex\">\n          <div className=\"flex-1 bg-black bg-opacity-40\" onClick={closeWizard} />\n          <div className=\"relative h-full w-full sm:w-[40vw] max-w-xl bg-white shadow-2xl p-0 flex flex-col transform transition-transform duration-500 ease-in-out translate-x-0\" style={{ right: 0 }}>\n            <button className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl z-10\" onClick={closeWizard}>&times;</button>\n            <div className=\"p-10 flex flex-col items-center justify-center h-full\">\n              <div className=\"mb-8 w-full text-center\">\n                <div className=\"text-lg text-gray-500 mb-2\">Step {stepIndex + 1} of {steps.length}</div>\n                <div className=\"text-3xl font-extrabold text-gray-900 mb-2\" style={{ fontFamily: 'Inter, sans-serif' }}>{steps[stepIndex].label}</div>\n                <div className=\"text-md text-gray-600 mb-6 max-w-md mx-auto\">{steps[stepIndex].description}</div>\n              </div>\n              {/* Step content */}\n              {steps[stepIndex].fields.map(field => {\n                if (field === 'name') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"text\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Company Name\"\n                      value={form.name}\n                      onChange={e => handleInput('name', e.target.value)}\n                      autoFocus\n                    />\n                  );\n                }\n                if (field === 'logo') {\n                  return (\n                    <div key={field} className=\"flex flex-col items-center mb-6 w-full\">\n                      <div className=\"w-28 h-28 rounded-full flex items-center justify-center bg-gray-100 mb-4 overflow-hidden\">\n                        {form.logoUrl ? (\n                          <img src={form.logoUrl} alt=\"Logo\" className=\"object-contain w-full h-full\" />\n                        ) : (\n                          <span className=\"text-gray-400 text-4xl font-bold\">Logo</span>\n                        )}\n                      </div>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        ref={fileInputRef}\n                        onChange={handleLogoUpload}\n                        className=\"hidden\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current && fileInputRef.current.click()}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\"\n                      >\n                        {form.logoUrl ? 'Change Logo' : 'Upload Logo'}\n                      </button>\n                    </div>\n                  );\n                }\n                if (field === 'company_number') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"text\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Company Number\"\n                      value={form.company_number}\n                      onChange={e => handleInput('company_number', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'incorporation_date') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"date\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      value={form.incorporation_date}\n                      onChange={e => handleInput('incorporation_date', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'registered_office') {\n                  return (\n                    <textarea\n                      key={field}\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Registered Office Address\"\n                      value={form.registered_office}\n                      onChange={e => handleInput('registered_office', e.target.value)}\n                      rows={3}\n                    />\n                  );\n                }\n                if (field === 'website') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"url\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Website\"\n                      value={form.website}\n                      onChange={e => handleInput('website', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'contact_email') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"email\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Contact Email\"\n                      value={form.contact_email}\n                      onChange={e => handleInput('contact_email', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'linkedin_profile') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"url\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"LinkedIn Profile\"\n                      value={form.linkedin_profile}\n                      onChange={e => handleInput('linkedin_profile', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'founders_agreement') {\n                  return (\n                    <div key={field} className=\"flex flex-col items-center mb-6 w-full\">\n                      <label className=\"block text-md font-semibold text-gray-700 mb-2\">Upload Founders Agreement</label>\n                      <input\n                        type=\"file\"\n                        accept=\"application/pdf,.doc,.docx\"\n                        onChange={e => handleFileUpload('founders_agreement', e)}\n                        className=\"mb-2\"\n                      />\n                      {form.founders_agreement && (\n                        <a href={form.founders_agreement} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline text-sm mb-2\">View Uploaded File</a>\n                      )}\n                      <div className=\"text-xs text-gray-500 mt-2 text-center\">\n                        A founders agreement sets out the rights and responsibilities of each founder.<br />\n                        If you don&apos;t have one, get a template in the <span className=\"font-semibold text-purple-600\">Legal</span> section.\n                      </div>\n                    </div>\n                  );\n                }\n                return null;\n              })}\n              {error && <div className=\"text-red-600 text-sm mt-2\">{error}</div>}\n              <div className=\"flex justify-between items-center w-full mt-8\">\n                <button\n                  type=\"button\"\n                  onClick={handleBack}\n                  className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\"\n                  disabled={stepIndex === 0 || saving}\n                >\n                  Back\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleNext}\n                  className={`px-6 py-2 rounded-md text-white text-lg font-semibold transition-colors ${isStepValid ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-300 cursor-not-allowed'}`}\n                  disabled={!isStepValid || saving}\n                >\n                  {stepIndex === steps.length - 1 ? 'Finish' : 'Save & Next'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FoundationDocuments; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}