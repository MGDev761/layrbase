{"ast":null,"code":"import { supabase } from '../lib/supabase';\n\n// Fetch all holidays for an organization (join employees)\nexport async function fetchHolidays(organization_id) {\n  var _await$supabase$from$;\n  const {\n    data,\n    error\n  } = await supabase.from('holidays').select('*, employee:employee_id(*)').in('employee_id', ((_await$supabase$from$ = (await supabase.from('employees').select('id').eq('organization_id', organization_id)).data) === null || _await$supabase$from$ === void 0 ? void 0 : _await$supabase$from$.map(e => e.id)) || []).order('start_date', {\n    ascending: false\n  });\n  if (error) throw error;\n  return data;\n}\n\n// Add a new holiday request\nexport async function addHoliday(holiday) {\n  const {\n    data,\n    error\n  } = await supabase.from('holidays').insert([holiday]).select().single();\n  if (error) throw error;\n  return data;\n}\n\n// Update a holiday request\nexport async function updateHoliday(id, updates) {\n  const {\n    data,\n    error\n  } = await supabase.from('holidays').update(updates).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n}\n\n// Delete a holiday request\nexport async function deleteHoliday(id) {\n  const {\n    error\n  } = await supabase.from('holidays').delete().eq('id', id);\n  if (error) throw error;\n}","map":{"version":3,"names":["supabase","fetchHolidays","organization_id","_await$supabase$from$","data","error","from","select","in","eq","map","e","id","order","ascending","addHoliday","holiday","insert","single","updateHoliday","updates","update","deleteHoliday","delete"],"sources":["/Users/markgiblin/Desktop/layrbase/src/services/holidaysService.js"],"sourcesContent":["import { supabase } from '../lib/supabase';\n\n// Fetch all holidays for an organization (join employees)\nexport async function fetchHolidays(organization_id) {\n  const { data, error } = await supabase\n    .from('holidays')\n    .select('*, employee:employee_id(*)')\n    .in('employee_id',\n      (await supabase.from('employees').select('id').eq('organization_id', organization_id)).data?.map(e => e.id) || []\n    )\n    .order('start_date', { ascending: false });\n  if (error) throw error;\n  return data;\n}\n\n// Add a new holiday request\nexport async function addHoliday(holiday) {\n  const { data, error } = await supabase\n    .from('holidays')\n    .insert([holiday])\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n}\n\n// Update a holiday request\nexport async function updateHoliday(id, updates) {\n  const { data, error } = await supabase\n    .from('holidays')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n}\n\n// Delete a holiday request\nexport async function deleteHoliday(id) {\n  const { error } = await supabase\n    .from('holidays')\n    .delete()\n    .eq('id', id);\n  if (error) throw error;\n} "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;;AAE1C;AACA,OAAO,eAAeC,aAAaA,CAACC,eAAe,EAAE;EAAA,IAAAC,qBAAA;EACnD,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAML,QAAQ,CACnCM,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,4BAA4B,CAAC,CACpCC,EAAE,CAAC,aAAa,EACf,EAAAL,qBAAA,IAAC,MAAMH,QAAQ,CAACM,IAAI,CAAC,WAAW,CAAC,CAACC,MAAM,CAAC,IAAI,CAAC,CAACE,EAAE,CAAC,iBAAiB,EAAEP,eAAe,CAAC,EAAEE,IAAI,cAAAD,qBAAA,uBAA3FA,qBAAA,CAA6FO,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,CAAC,KAAI,EACjH,CAAC,CACAC,KAAK,CAAC,YAAY,EAAE;IAAEC,SAAS,EAAE;EAAM,CAAC,CAAC;EAC5C,IAAIT,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAeW,UAAUA,CAACC,OAAO,EAAE;EACxC,MAAM;IAAEZ,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAML,QAAQ,CACnCM,IAAI,CAAC,UAAU,CAAC,CAChBW,MAAM,CAAC,CAACD,OAAO,CAAC,CAAC,CACjBT,MAAM,CAAC,CAAC,CACRW,MAAM,CAAC,CAAC;EACX,IAAIb,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAee,aAAaA,CAACP,EAAE,EAAEQ,OAAO,EAAE;EAC/C,MAAM;IAAEhB,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAML,QAAQ,CACnCM,IAAI,CAAC,UAAU,CAAC,CAChBe,MAAM,CAACD,OAAO,CAAC,CACfX,EAAE,CAAC,IAAI,EAAEG,EAAE,CAAC,CACZL,MAAM,CAAC,CAAC,CACRW,MAAM,CAAC,CAAC;EACX,IAAIb,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAekB,aAAaA,CAACV,EAAE,EAAE;EACtC,MAAM;IAAEP;EAAM,CAAC,GAAG,MAAML,QAAQ,CAC7BM,IAAI,CAAC,UAAU,CAAC,CAChBiB,MAAM,CAAC,CAAC,CACRd,EAAE,CAAC,IAAI,EAAEG,EAAE,CAAC;EACf,IAAIP,KAAK,EAAE,MAAMA,KAAK;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}