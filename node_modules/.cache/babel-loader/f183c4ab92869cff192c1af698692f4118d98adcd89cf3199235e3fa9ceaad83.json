{"ast":null,"code":"var _jsxFileName = \"/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { CheckCircleIcon, LinkIcon, ArrowUpOnSquareIcon, DocumentTextIcon, BuildingOfficeIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\n\n// New generic modal for all steps\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QuickSetupModal = ({\n  open,\n  step,\n  stepIndex,\n  totalSteps,\n  values,\n  setValues,\n  onSave,\n  onSkip,\n  onClose,\n  uploading,\n  uploadError,\n  setUploading,\n  setUploadError\n}) => {\n  _s();\n  const fileInputRef = useRef();\n  const [localValue, setLocalValue] = useState(values[step.key] || '');\n  const [localFile, setLocalFile] = useState(null);\n  const [localFileUrl, setLocalFileUrl] = useState(values[step.key + '_url'] || '');\n  useEffect(() => {\n    setLocalValue(values[step.key] || '');\n    setLocalFile(null);\n    setLocalFileUrl(values[step.key + '_url'] || '');\n  }, [step, values]);\n\n  // For upload steps\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setUploading(true);\n    setUploadError('');\n    try {\n      // Example: upload to supabase storage (customize per step type)\n      const ext = file.name.split('.').pop();\n      const path = `${step.key}/${Date.now()}.${ext}`;\n      const {\n        data,\n        error\n      } = await supabase.storage.from('company-foundation').upload(path, file, {\n        upsert: true\n      });\n      if (error) throw error;\n      const {\n        data: urlData,\n        error: urlError\n      } = supabase.storage.from('company-foundation').getPublicUrl(path);\n      if (urlError || !(urlData !== null && urlData !== void 0 && urlData.publicUrl)) throw urlError || new Error('No public URL');\n      setLocalFile(file);\n      setLocalFileUrl(urlData.publicUrl);\n      setUploading(false);\n    } catch (err) {\n      setUploadError(err.message || 'Upload failed');\n      setUploading(false);\n    }\n  };\n\n  // Save & Next handler\n  const handleSave = () => {\n    if (step.hasUpload) {\n      onSave(step.key, localFileUrl, localFile);\n    } else {\n      onSave(step.key, localValue);\n    }\n  };\n\n  // Render input or upload\n  let inputContent = null;\n  if (step.hasUpload) {\n    inputContent = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        ref: fileInputRef,\n        onChange: handleFileChange,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => fileInputRef.current && fileInputRef.current.click(),\n        className: \"px-6 py-3 bg-blue-600 text-white rounded-lg text-lg font-semibold hover:bg-blue-700 mb-4\",\n        disabled: uploading,\n        children: localFile ? 'Change File' : 'Upload File'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), localFileUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-green-700 text-sm mb-2\",\n        children: \"File uploaded!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), uploadError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600 text-sm mb-2\",\n        children: uploadError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-500 text-center text-base max-w-xl mb-2\",\n        children: step.uploadDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-gray-400 text-center\",\n        children: \"If you don't have one, you can get a template in the Legal section.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  } else {\n    inputContent = /*#__PURE__*/_jsxDEV(\"input\", {\n      type: step.inputType || 'text',\n      value: localValue,\n      onChange: e => setLocalValue(e.target.value),\n      placeholder: step.placeholder,\n      className: \"w-full max-w-lg mx-auto px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg text-center\",\n      autoFocus: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Only enable Save & Next if value or file is present\n  const canSave = step.hasUpload ? !!localFileUrl : !!localValue.trim();\n  return open ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-10 flex flex-col items-center relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute top-6 right-8 text-3xl text-gray-400 hover:text-gray-600\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 w-full text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-3xl font-extrabold text-gray-900 mb-2\",\n          style: {\n            fontFamily: 'Inter, sans-serif'\n          },\n          children: step.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg text-gray-500 mb-2\",\n          children: step.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col justify-center w-full mb-8\",\n        children: inputContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end w-full gap-4 mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-6 py-3 rounded-lg bg-gray-100 text-gray-600 font-semibold hover:bg-gray-200 text-lg\",\n          onClick: onSkip,\n          type: \"button\",\n          children: \"Skip This Step\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold text-lg transition-all ${canSave ? 'hover:bg-blue-700' : 'opacity-50 cursor-not-allowed'}`,\n          onClick: handleSave,\n          disabled: !canSave || uploading,\n          type: \"button\",\n          children: \"Save & Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this) : null;\n};\n_s(QuickSetupModal, \"pAXaJKaSBp7TVpJ7bnRvIJb3G7o=\");\n_c = QuickSetupModal;\nconst FoundationDocuments = () => {\n  _s2();\n  const {\n    currentOrganization\n  } = useAuth();\n  const [showCompanyPopup, setShowCompanyPopup] = useState(false);\n  const [showCompanyNumberPopup, setShowCompanyNumberPopup] = useState(false);\n  const [showOfficePopup, setShowOfficePopup] = useState(false);\n  const [showBankPopup, setShowBankPopup] = useState(false);\n  const [showVatPopup, setShowVatPopup] = useState(false);\n  const [companyName, setCompanyName] = useState('');\n  const [companyNumber, setCompanyNumber] = useState('');\n  const [incorporationDate, setIncorporationDate] = useState('');\n  const [registeredOffice, setRegisteredOffice] = useState('');\n  const [website, setWebsite] = useState('');\n  const [contactEmail, setContactEmail] = useState('');\n  const [linkedinProfile, setLinkedinProfile] = useState('');\n  const [vatNumber, setVatNumber] = useState('');\n  const [bankProvider, setBankProvider] = useState('');\n  const [bankAccountOpened, setBankAccountOpened] = useState('');\n  const [logoUrl, setLogoUrl] = useState('');\n  const fileInputRef = useRef();\n  const [checklist, setChecklist] = useState([{\n    step: 'Company Name & Logo',\n    description: 'Set your legal company name and upload your logo.',\n    hasUpload: true,\n    uploadType: 'logo',\n    completed: false,\n    popup: 'companyName'\n  }, {\n    step: 'Company Number & Incorporation Date',\n    description: 'Record the Companies House number and date of incorporation.',\n    completed: false,\n    popup: 'companyNumber'\n  }, {\n    step: 'Registered Office & Contact Info',\n    description: 'Store your legal address, website, and contact emails.',\n    completed: false,\n    popup: 'office'\n  }, {\n    step: 'Articles of Association',\n    description: \"Upload your articles and confirm they're accessible to the team.\",\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Shareholders & Cap Table',\n    description: 'Ensure initial shareholders are logged and cap table is added.',\n    hasLink: true,\n    linkText: 'View Cap Table',\n    linkTo: '/cap-table',\n    completed: false\n  }, {\n    step: 'Founder Agreements',\n    description: 'Upload signed founder agreements or SAFEs if applicable.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'IP Assignment',\n    description: 'Confirm IP assignment agreements are in place for founders and early team.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'NDAs',\n    description: 'Add template NDAs for future use and upload any executed ones.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Business Bank Account',\n    description: 'Record banking provider and date account was opened.',\n    completed: false,\n    popup: 'bank'\n  }, {\n    step: 'VAT Registration',\n    description: 'Track your VAT registration number and effective date.',\n    completed: false,\n    popup: 'vat'\n  }, {\n    step: 'Insurance',\n    description: 'Upload insurance docs (public liability, employer liability, cyber etc).',\n    hasUpload: true,\n    uploadType: 'policy',\n    completed: false\n  }, {\n    step: 'Board Structure',\n    description: 'Define board members and roles. Upload board meeting template.',\n    hasUpload: true,\n    uploadType: 'document',\n    completed: false\n  }, {\n    step: 'Org Chart',\n    description: 'Add your org chart for internal visibility.',\n    hasUpload: true,\n    uploadType: 'image/file',\n    completed: false\n  }, {\n    step: \"Founders' Equity Vesting\",\n    description: \"Record any equity vesting schedules in place.\",\n    hasLink: true,\n    linkText: 'Link to Cap Table',\n    linkTo: '/cap-table',\n    completed: false\n  }, {\n    step: 'Compliance Deadlines',\n    description: 'Add reminders for annual filings, confirmation statements, and accounts.',\n    hasLink: true,\n    linkText: 'Add to calendar',\n    linkTo: '#',\n    completed: false\n  }]);\n\n  // Calculate progress percentage\n  const completedSteps = checklist.filter(item => item.completed).length;\n  const totalSteps = checklist.length;\n  const progressPercentage = Math.round(completedSteps / totalSteps * 100);\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setCompanyName(data.name || '');\n        setCompanyNumber(data.company_number || '');\n        setIncorporationDate(data.incorporation_date || '');\n        setRegisteredOffice(data.registered_office || '');\n        setWebsite(data.website || '');\n        setContactEmail(data.contact_email || '');\n        setVatNumber(data.vat_number || '');\n        setBankProvider(data.bank_provider || '');\n        setBankAccountOpened(data.bank_account_opened || '');\n        setLogoUrl(data.logo_url || '');\n        setLinkedinProfile(data.linkedin_profile || '');\n\n        // Set initial checklist completion based on fetched data\n        setChecklist(prev => prev.map((item, idx) => {\n          switch (idx) {\n            case 0:\n              // Company Name & Logo\n              return {\n                ...item,\n                completed: !!(data.name && data.logo_url)\n              };\n            case 1:\n              // Company Number & Incorporation Date\n              return {\n                ...item,\n                completed: !!(data.company_number && data.incorporation_date)\n              };\n            case 2:\n              // Registered Office & Contact Info\n              return {\n                ...item,\n                completed: !!(data.registered_office && data.website && data.contact_email)\n              };\n            case 8:\n              // Business Bank Account\n              return {\n                ...item,\n                completed: !!(data.bank_provider && data.bank_account_opened)\n              };\n            case 9:\n              // VAT Registration\n              return {\n                ...item,\n                completed: !!data.vat_number\n              };\n            default:\n              return item;\n          }\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n  const handleToggleComplete = useCallback(index => {\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[index].completed = !newChecklist[index].completed;\n      return newChecklist;\n    });\n  }, []);\n  const handleStepClick = useCallback(index => {\n    const item = checklist[index];\n    if (item.popup) {\n      switch (item.popup) {\n        case 'companyName':\n          setShowCompanyPopup(true);\n          break;\n        case 'companyNumber':\n          setShowCompanyNumberPopup(true);\n          break;\n        case 'office':\n          setShowOfficePopup(true);\n          break;\n        case 'bank':\n          setShowBankPopup(true);\n          break;\n        case 'vat':\n          setShowVatPopup(true);\n          break;\n        default:\n          break;\n      }\n    }\n  }, []);\n  const handleCompanyNameSubmit = async () => {\n    if (!companyName.trim() || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      name: companyName\n    });\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[0].completed = !!(companyName && logoUrl);\n      return newChecklist;\n    });\n    setShowCompanyPopup(false);\n  };\n  const handleCompanyNumberSubmit = async () => {\n    if (!companyNumber.trim() || !incorporationDate || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      company_number: companyNumber,\n      incorporation_date: incorporationDate\n    });\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[1].completed = true;\n      return newChecklist;\n    });\n    setShowCompanyNumberPopup(false);\n  };\n  const handleOfficeSubmit = async () => {\n    if (!registeredOffice.trim() || !website.trim() || !contactEmail.trim() || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      registered_office: registeredOffice,\n      website,\n      contact_email: contactEmail,\n      linkedin_profile: linkedinProfile\n    });\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[2].completed = true;\n      return newChecklist;\n    });\n    setShowOfficePopup(false);\n  };\n  const handleBankSubmit = async () => {\n    if (!bankProvider.trim() || !bankAccountOpened || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      bank_provider: bankProvider,\n      bank_account_opened: bankAccountOpened\n    });\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[8].completed = true;\n      return newChecklist;\n    });\n    setShowBankPopup(false);\n  };\n  const handleVatSubmit = async () => {\n    if (!vatNumber.trim() || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      vat_number: vatNumber\n    });\n    setChecklist(prev => {\n      const newChecklist = [...prev];\n      newChecklist[9].completed = true;\n      return newChecklist;\n    });\n    setShowVatPopup(false);\n  };\n  const handleLogoUpload = async e => {\n    const file = e.target.files[0];\n    if (!file || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const {\n      data: uploadData,\n      error: uploadError\n    } = await supabase.storage.from('company-logos').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      alert('Error uploading logo: ' + uploadError.message);\n      return;\n    }\n    const {\n      data: publicUrlData,\n      error: urlError\n    } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !(publicUrlData !== null && publicUrlData !== void 0 && publicUrlData.publicUrl)) {\n      alert('Error getting logo URL');\n      return;\n    }\n    const publicUrl = publicUrlData.publicUrl;\n    setLogoUrl(publicUrl);\n    await upsertCompanyProfile({\n      organization_id: currentOrganization.organization_id,\n      logo_url: publicUrl\n    });\n  };\n  const OrgChart = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-50 border border-gray-200 rounded-lg p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-sm font-medium text-gray-800 mb-2\",\n      children: \"Org Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-700\",\n      children: \"Org chart content will be displayed here.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow border border-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 py-4 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-gray-900\",\n        children: \"Company Setup Wizard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-gray-600\",\n        children: \"Complete your company setup step by step.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 py-4 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: \"Setup Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium text-gray-600\",\n          children: [progressPercentage, \"% Complete\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-gray-200 rounded-full h-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-500 h-2 rounded-full transition-all duration-300\",\n          style: {\n            width: `${progressPercentage}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-lg p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-blue-800 mb-2\",\n            children: \"Quick Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-blue-700 mb-3\",\n            children: \"Click on any step to complete it. Some steps will open forms to collect information.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowCompanyPopup(true),\n            className: \"text-sm text-blue-600 hover:text-blue-800 underline\",\n            children: \"Start with Company Name \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: checklist.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${item.completed ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200 hover:bg-gray-100'}`,\n            onClick: () => handleStepClick(index),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  handleToggleComplete(index);\n                },\n                className: `flex-shrink-0 ${item.completed ? 'text-green-600' : 'text-gray-400 hover:text-gray-600'}`,\n                children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                  className: \"h-6 w-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: `text-sm font-medium ${item.completed ? 'text-green-800' : 'text-gray-900'}`,\n                  children: item.step\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: `text-sm ${item.completed ? 'text-green-700' : 'text-gray-600'}`,\n                  children: item.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [item.hasUpload && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => e.stopPropagation(),\n                className: \"text-sm text-gray-600 hover:text-gray-800 flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(ArrowUpOnSquareIcon, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), item.hasLink && /*#__PURE__*/_jsxDEV(\"a\", {\n                href: item.linkTo,\n                onClick: e => e.stopPropagation(),\n                className: \"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(LinkIcon, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: item.linkText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 21\n              }, this), item.popup && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\",\n                children: \"Click to edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)]\n          }, item.step, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this), showCompanyPopup && /*#__PURE__*/_jsxDEV(QuickSetupModal, {\n      open: showCompanyPopup,\n      step: {\n        key: 'companyName',\n        title: 'Company Name',\n        description: 'Enter your company name',\n        inputType: 'text',\n        placeholder: 'Enter company name',\n        hasUpload: false\n      },\n      stepIndex: 0,\n      totalSteps: checklist.length,\n      values: {\n        companyName\n      },\n      setValues: setCompanyName,\n      onSave: handleCompanyNameSubmit,\n      onSkip: () => setShowCompanyPopup(false),\n      onClose: () => setShowCompanyPopup(false),\n      uploading: false,\n      uploadError: \"\",\n      setUploading: () => {},\n      setUploadError: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 28\n    }, this), showCompanyNumberPopup && /*#__PURE__*/_jsxDEV(QuickSetupModal, {\n      open: showCompanyNumberPopup,\n      step: {\n        key: 'companyNumber',\n        title: 'Company Number',\n        description: 'Enter your company number and incorporation date',\n        inputType: 'text',\n        placeholder: 'Enter company number',\n        hasUpload: false\n      },\n      stepIndex: 1,\n      totalSteps: checklist.length,\n      values: {\n        companyNumber,\n        incorporationDate\n      },\n      setValues: {\n        companyNumber,\n        incorporationDate\n      },\n      onSave: handleCompanyNumberSubmit,\n      onSkip: () => setShowCompanyNumberPopup(false),\n      onClose: () => setShowCompanyNumberPopup(false),\n      uploading: false,\n      uploadError: \"\",\n      setUploading: () => {},\n      setUploadError: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 34\n    }, this), showOfficePopup && /*#__PURE__*/_jsxDEV(QuickSetupModal, {\n      open: showOfficePopup,\n      step: {\n        key: 'office',\n        title: 'Registered Office',\n        description: 'Enter your registered office and contact information',\n        inputType: 'text',\n        placeholder: 'Enter registered office',\n        hasUpload: false\n      },\n      stepIndex: 2,\n      totalSteps: checklist.length,\n      values: {\n        registeredOffice,\n        website,\n        contactEmail,\n        linkedinProfile\n      },\n      setValues: {\n        registeredOffice,\n        website,\n        contactEmail,\n        linkedinProfile\n      },\n      onSave: handleOfficeSubmit,\n      onSkip: () => setShowOfficePopup(false),\n      onClose: () => setShowOfficePopup(false),\n      uploading: false,\n      uploadError: \"\",\n      setUploading: () => {},\n      setUploadError: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 27\n    }, this), showBankPopup && /*#__PURE__*/_jsxDEV(QuickSetupModal, {\n      open: showBankPopup,\n      step: {\n        key: 'bank',\n        title: 'Business Bank Account',\n        description: 'Enter your banking provider and account opened date',\n        inputType: 'text',\n        placeholder: 'Enter banking provider',\n        hasUpload: false\n      },\n      stepIndex: 8,\n      totalSteps: checklist.length,\n      values: {\n        bankProvider,\n        bankAccountOpened\n      },\n      setValues: {\n        bankProvider,\n        bankAccountOpened\n      },\n      onSave: handleBankSubmit,\n      onSkip: () => setShowBankPopup(false),\n      onClose: () => setShowBankPopup(false),\n      uploading: false,\n      uploadError: \"\",\n      setUploading: () => {},\n      setUploadError: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 25\n    }, this), showVatPopup && /*#__PURE__*/_jsxDEV(QuickSetupModal, {\n      open: showVatPopup,\n      step: {\n        key: 'vat',\n        title: 'VAT Registration',\n        description: 'Enter your VAT registration number and effective date',\n        inputType: 'text',\n        placeholder: 'Enter VAT registration number',\n        hasUpload: false\n      },\n      stepIndex: 9,\n      totalSteps: checklist.length,\n      values: {\n        vatNumber\n      },\n      setValues: {\n        vatNumber\n      },\n      onSave: handleVatSubmit,\n      onSkip: () => setShowVatPopup(false),\n      onClose: () => setShowVatPopup(false),\n      uploading: false,\n      uploadError: \"\",\n      setUploading: () => {},\n      setUploadError: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n};\n_s2(FoundationDocuments, \"axElYEAPo9J1Hkgl6CFo4rEIFPE=\", false, function () {\n  return [useAuth];\n});\n_c2 = FoundationDocuments;\nexport default FoundationDocuments;\nvar _c, _c2;\n$RefreshReg$(_c, \"QuickSetupModal\");\n$RefreshReg$(_c2, \"FoundationDocuments\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","CheckCircleIcon","LinkIcon","ArrowUpOnSquareIcon","DocumentTextIcon","BuildingOfficeIcon","useAuth","getCompanyProfile","upsertCompanyProfile","supabase","jsxDEV","_jsxDEV","QuickSetupModal","open","step","stepIndex","totalSteps","values","setValues","onSave","onSkip","onClose","uploading","uploadError","setUploading","setUploadError","_s","fileInputRef","localValue","setLocalValue","key","localFile","setLocalFile","localFileUrl","setLocalFileUrl","handleFileChange","e","file","target","files","ext","name","split","pop","path","Date","now","data","error","storage","from","upload","upsert","urlData","urlError","getPublicUrl","publicUrl","Error","err","message","handleSave","hasUpload","inputContent","className","children","type","ref","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","current","click","disabled","uploadDescription","inputType","value","placeholder","autoFocus","canSave","trim","style","fontFamily","title","description","_c","FoundationDocuments","_s2","currentOrganization","showCompanyPopup","setShowCompanyPopup","showCompanyNumberPopup","setShowCompanyNumberPopup","showOfficePopup","setShowOfficePopup","showBankPopup","setShowBankPopup","showVatPopup","setShowVatPopup","companyName","setCompanyName","companyNumber","setCompanyNumber","incorporationDate","setIncorporationDate","registeredOffice","setRegisteredOffice","website","setWebsite","contactEmail","setContactEmail","linkedinProfile","setLinkedinProfile","vatNumber","setVatNumber","bankProvider","setBankProvider","bankAccountOpened","setBankAccountOpened","logoUrl","setLogoUrl","checklist","setChecklist","uploadType","completed","popup","hasLink","linkText","linkTo","completedSteps","filter","item","length","progressPercentage","Math","round","fetchProfile","organization_id","company_number","incorporation_date","registered_office","contact_email","vat_number","bank_provider","bank_account_opened","logo_url","linkedin_profile","prev","map","idx","handleToggleComplete","index","newChecklist","handleStepClick","handleCompanyNameSubmit","handleCompanyNumberSubmit","handleOfficeSubmit","handleBankSubmit","handleVatSubmit","handleLogoUpload","fileExt","filePath","uploadData","alert","publicUrlData","OrgChart","width","stopPropagation","href","_c2","$RefreshReg$"],"sources":["/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { CheckCircleIcon, LinkIcon, ArrowUpOnSquareIcon, DocumentTextIcon, BuildingOfficeIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\n\n// New generic modal for all steps\nconst QuickSetupModal = ({\n  open, step, stepIndex, totalSteps, values, setValues, onSave, onSkip, onClose, uploading, uploadError, setUploading, setUploadError\n}) => {\n  const fileInputRef = useRef();\n  const [localValue, setLocalValue] = useState(values[step.key] || '');\n  const [localFile, setLocalFile] = useState(null);\n  const [localFileUrl, setLocalFileUrl] = useState(values[step.key + '_url'] || '');\n  useEffect(() => {\n    setLocalValue(values[step.key] || '');\n    setLocalFile(null);\n    setLocalFileUrl(values[step.key + '_url'] || '');\n  }, [step, values]);\n\n  // For upload steps\n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setUploading(true);\n    setUploadError('');\n    try {\n      // Example: upload to supabase storage (customize per step type)\n      const ext = file.name.split('.').pop();\n      const path = `${step.key}/${Date.now()}.${ext}`;\n      const { data, error } = await supabase.storage.from('company-foundation').upload(path, file, { upsert: true });\n      if (error) throw error;\n      const { data: urlData, error: urlError } = supabase.storage.from('company-foundation').getPublicUrl(path);\n      if (urlError || !urlData?.publicUrl) throw urlError || new Error('No public URL');\n      setLocalFile(file);\n      setLocalFileUrl(urlData.publicUrl);\n      setUploading(false);\n    } catch (err) {\n      setUploadError(err.message || 'Upload failed');\n      setUploading(false);\n    }\n  };\n\n  // Save & Next handler\n  const handleSave = () => {\n    if (step.hasUpload) {\n      onSave(step.key, localFileUrl, localFile);\n    } else {\n      onSave(step.key, localValue);\n    }\n  };\n\n  // Render input or upload\n  let inputContent = null;\n  if (step.hasUpload) {\n    inputContent = (\n      <div className=\"flex flex-col items-center w-full\">\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          onChange={handleFileChange}\n          className=\"hidden\"\n        />\n        <button\n          type=\"button\"\n          onClick={() => fileInputRef.current && fileInputRef.current.click()}\n          className=\"px-6 py-3 bg-blue-600 text-white rounded-lg text-lg font-semibold hover:bg-blue-700 mb-4\"\n          disabled={uploading}\n        >\n          {localFile ? 'Change File' : 'Upload File'}\n        </button>\n        {localFileUrl && (\n          <div className=\"text-green-700 text-sm mb-2\">File uploaded!</div>\n        )}\n        {uploadError && <div className=\"text-red-600 text-sm mb-2\">{uploadError}</div>}\n        <div className=\"text-gray-500 text-center text-base max-w-xl mb-2\">{step.uploadDescription}</div>\n        <div className=\"text-xs text-gray-400 text-center\">If you don't have one, you can get a template in the Legal section.</div>\n      </div>\n    );\n  } else {\n    inputContent = (\n      <input\n        type={step.inputType || 'text'}\n        value={localValue}\n        onChange={e => setLocalValue(e.target.value)}\n        placeholder={step.placeholder}\n        className=\"w-full max-w-lg mx-auto px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg text-center\"\n        autoFocus\n      />\n    );\n  }\n\n  // Only enable Save & Next if value or file is present\n  const canSave = step.hasUpload ? !!localFileUrl : !!localValue.trim();\n\n  return open ? (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-10 flex flex-col items-center relative\">\n        <button className=\"absolute top-6 right-8 text-3xl text-gray-400 hover:text-gray-600\" onClick={onClose}>&times;</button>\n        <div className=\"mb-8 w-full text-center\">\n          <div className=\"text-3xl font-extrabold text-gray-900 mb-2\" style={{ fontFamily: 'Inter, sans-serif' }}>{step.title}</div>\n          <div className=\"text-lg text-gray-500 mb-2\">{step.description}</div>\n        </div>\n        <div className=\"flex-1 flex flex-col justify-center w-full mb-8\">\n          {inputContent}\n        </div>\n        <div className=\"flex justify-end w-full gap-4 mt-8\">\n          <button\n            className=\"px-6 py-3 rounded-lg bg-gray-100 text-gray-600 font-semibold hover:bg-gray-200 text-lg\"\n            onClick={onSkip}\n            type=\"button\"\n          >\n            Skip This Step\n          </button>\n          <button\n            className={`px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold text-lg transition-all ${canSave ? 'hover:bg-blue-700' : 'opacity-50 cursor-not-allowed'}`}\n            onClick={handleSave}\n            disabled={!canSave || uploading}\n            type=\"button\"\n          >\n            Save & Next\n          </button>\n        </div>\n      </div>\n    </div>\n  ) : null;\n};\n\nconst FoundationDocuments = () => {\n  const { currentOrganization } = useAuth();\n  const [showCompanyPopup, setShowCompanyPopup] = useState(false);\n  const [showCompanyNumberPopup, setShowCompanyNumberPopup] = useState(false);\n  const [showOfficePopup, setShowOfficePopup] = useState(false);\n  const [showBankPopup, setShowBankPopup] = useState(false);\n  const [showVatPopup, setShowVatPopup] = useState(false);\n  const [companyName, setCompanyName] = useState('');\n  const [companyNumber, setCompanyNumber] = useState('');\n  const [incorporationDate, setIncorporationDate] = useState('');\n  const [registeredOffice, setRegisteredOffice] = useState('');\n  const [website, setWebsite] = useState('');\n  const [contactEmail, setContactEmail] = useState('');\n  const [linkedinProfile, setLinkedinProfile] = useState('');\n  const [vatNumber, setVatNumber] = useState('');\n  const [bankProvider, setBankProvider] = useState('');\n  const [bankAccountOpened, setBankAccountOpened] = useState('');\n  const [logoUrl, setLogoUrl] = useState('');\n  const fileInputRef = useRef();\n  \n  const [checklist, setChecklist] = useState([\n    { step: 'Company Name & Logo', description: 'Set your legal company name and upload your logo.', hasUpload: true, uploadType: 'logo', completed: false, popup: 'companyName' },\n    { step: 'Company Number & Incorporation Date', description: 'Record the Companies House number and date of incorporation.', completed: false, popup: 'companyNumber' },\n    { step: 'Registered Office & Contact Info', description: 'Store your legal address, website, and contact emails.', completed: false, popup: 'office' },\n    { step: 'Articles of Association', description: \"Upload your articles and confirm they're accessible to the team.\", hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Shareholders & Cap Table', description: 'Ensure initial shareholders are logged and cap table is added.', hasLink: true, linkText: 'View Cap Table', linkTo: '/cap-table', completed: false },\n    { step: 'Founder Agreements', description: 'Upload signed founder agreements or SAFEs if applicable.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'IP Assignment', description: 'Confirm IP assignment agreements are in place for founders and early team.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'NDAs', description: 'Add template NDAs for future use and upload any executed ones.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Business Bank Account', description: 'Record banking provider and date account was opened.', completed: false, popup: 'bank' },\n    { step: 'VAT Registration', description: 'Track your VAT registration number and effective date.', completed: false, popup: 'vat' },\n    { step: 'Insurance', description: 'Upload insurance docs (public liability, employer liability, cyber etc).', hasUpload: true, uploadType: 'policy', completed: false },\n    { step: 'Board Structure', description: 'Define board members and roles. Upload board meeting template.', hasUpload: true, uploadType: 'document', completed: false },\n    { step: 'Org Chart', description: 'Add your org chart for internal visibility.', hasUpload: true, uploadType: 'image/file', completed: false },\n    { step: \"Founders' Equity Vesting\", description: \"Record any equity vesting schedules in place.\", hasLink: true, linkText: 'Link to Cap Table', linkTo: '/cap-table', completed: false },\n    { step: 'Compliance Deadlines', description: 'Add reminders for annual filings, confirmation statements, and accounts.', hasLink: true, linkText: 'Add to calendar', linkTo: '#', completed: false },\n  ]);\n\n  // Calculate progress percentage\n  const completedSteps = checklist.filter(item => item.completed).length;\n  const totalSteps = checklist.length;\n  const progressPercentage = Math.round((completedSteps / totalSteps) * 100);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!currentOrganization?.organization_id) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setCompanyName(data.name || '');\n        setCompanyNumber(data.company_number || '');\n        setIncorporationDate(data.incorporation_date || '');\n        setRegisteredOffice(data.registered_office || '');\n        setWebsite(data.website || '');\n        setContactEmail(data.contact_email || '');\n        setVatNumber(data.vat_number || '');\n        setBankProvider(data.bank_provider || '');\n        setBankAccountOpened(data.bank_account_opened || '');\n        setLogoUrl(data.logo_url || '');\n        setLinkedinProfile(data.linkedin_profile || '');\n        \n        // Set initial checklist completion based on fetched data\n        setChecklist((prev) => prev.map((item, idx) => {\n          switch (idx) {\n            case 0: // Company Name & Logo\n              return { ...item, completed: !!(data.name && data.logo_url) };\n            case 1: // Company Number & Incorporation Date\n              return { ...item, completed: !!(data.company_number && data.incorporation_date) };\n            case 2: // Registered Office & Contact Info\n              return { ...item, completed: !!(data.registered_office && data.website && data.contact_email) };\n            case 8: // Business Bank Account\n              return { ...item, completed: !!(data.bank_provider && data.bank_account_opened) };\n            case 9: // VAT Registration\n              return { ...item, completed: !!data.vat_number };\n            default:\n              return item;\n          }\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n\n  const handleToggleComplete = useCallback((index) => {\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[index].completed = !newChecklist[index].completed;\n      return newChecklist;\n    });\n  }, []);\n\n  const handleStepClick = useCallback((index) => {\n    const item = checklist[index];\n    if (item.popup) {\n      switch (item.popup) {\n        case 'companyName':\n          setShowCompanyPopup(true);\n          break;\n        case 'companyNumber':\n          setShowCompanyNumberPopup(true);\n          break;\n        case 'office':\n          setShowOfficePopup(true);\n          break;\n        case 'bank':\n          setShowBankPopup(true);\n          break;\n        case 'vat':\n          setShowVatPopup(true);\n          break;\n        default:\n          break;\n      }\n    }\n  }, []);\n\n  const handleCompanyNameSubmit = async () => {\n    if (!companyName.trim() || !currentOrganization?.organization_id) return;\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, name: companyName });\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[0].completed = !!(companyName && logoUrl);\n      return newChecklist;\n    });\n    setShowCompanyPopup(false);\n  };\n\n  const handleCompanyNumberSubmit = async () => {\n    if (!companyNumber.trim() || !incorporationDate || !currentOrganization?.organization_id) return;\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, company_number: companyNumber, incorporation_date: incorporationDate });\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[1].completed = true;\n      return newChecklist;\n    });\n    setShowCompanyNumberPopup(false);\n  };\n\n  const handleOfficeSubmit = async () => {\n    if (!registeredOffice.trim() || !website.trim() || !contactEmail.trim() || !currentOrganization?.organization_id) return;\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, registered_office: registeredOffice, website, contact_email: contactEmail, linkedin_profile: linkedinProfile });\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[2].completed = true;\n      return newChecklist;\n    });\n    setShowOfficePopup(false);\n  };\n\n  const handleBankSubmit = async () => {\n    if (!bankProvider.trim() || !bankAccountOpened || !currentOrganization?.organization_id) return;\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, bank_provider: bankProvider, bank_account_opened: bankAccountOpened });\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[8].completed = true;\n      return newChecklist;\n    });\n    setShowBankPopup(false);\n  };\n\n  const handleVatSubmit = async () => {\n    if (!vatNumber.trim() || !currentOrganization?.organization_id) return;\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, vat_number: vatNumber });\n    setChecklist((prev) => {\n      const newChecklist = [...prev];\n      newChecklist[9].completed = true;\n      return newChecklist;\n    });\n    setShowVatPopup(false);\n  };\n\n  const handleLogoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file || !currentOrganization?.organization_id) return;\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const { data: uploadData, error: uploadError } = await supabase.storage.from('company-logos').upload(filePath, file, { upsert: true });\n    if (uploadError) {\n      alert('Error uploading logo: ' + uploadError.message);\n      return;\n    }\n    const { data: publicUrlData, error: urlError } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !publicUrlData?.publicUrl) {\n      alert('Error getting logo URL');\n      return;\n    }\n    const publicUrl = publicUrlData.publicUrl;\n    setLogoUrl(publicUrl);\n    await upsertCompanyProfile({ organization_id: currentOrganization.organization_id, logo_url: publicUrl });\n  };\n\n  const OrgChart = () => (\n    <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n      <h3 className=\"text-sm font-medium text-gray-800 mb-2\">Org Chart</h3>\n      <p className=\"text-sm text-gray-700\">\n        Org chart content will be displayed here.\n      </p>\n    </div>\n  );\n\n  return (\n    <div className=\"bg-white rounded-lg shadow border border-gray-200\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <h2 className=\"text-xl font-bold text-gray-900\">Company Setup Wizard</h2>\n        <p className=\"mt-1 text-sm text-gray-600\">\n          Complete your company setup step by step.\n        </p>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Setup Progress</h3>\n          <span className=\"text-sm font-medium text-gray-600\">{progressPercentage}% Complete</span>\n        </div>\n        \n        {/* Overall Progress Bar */}\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div \n            className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\n            style={{ width: `${progressPercentage}%` }}\n          ></div>\n        </div>\n      </div>\n\n      {/* Wizard Content */}\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Quick Setup</h3>\n            <p className=\"text-sm text-blue-700 mb-3\">\n              Click on any step to complete it. Some steps will open forms to collect information.\n            </p>\n            <button\n              onClick={() => setShowCompanyPopup(true)}\n              className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n            >\n              Start with Company Name →\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {checklist.map((item, index) => (\n              <div\n                key={item.step}\n                className={`flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${\n                  item.completed ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200 hover:bg-gray-100'\n                }`}\n                onClick={() => handleStepClick(index)}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleToggleComplete(index);\n                    }}\n                    className={`flex-shrink-0 ${\n                      item.completed ? 'text-green-600' : 'text-gray-400 hover:text-gray-600'\n                    }`}\n                  >\n                    <CheckCircleIcon className=\"h-6 w-6\" />\n                  </button>\n                  <div>\n                    <h4 className={`text-sm font-medium ${item.completed ? 'text-green-800' : 'text-gray-900'}`}>\n                      {item.step}\n                    </h4>\n                    <p className={`text-sm ${item.completed ? 'text-green-700' : 'text-gray-600'}`}>\n                      {item.description}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {item.hasUpload && (\n                    <button \n                      onClick={(e) => e.stopPropagation()}\n                      className=\"text-sm text-gray-600 hover:text-gray-800 flex items-center space-x-1\"\n                    >\n                      <ArrowUpOnSquareIcon className=\"h-4 w-4\" />\n                      <span>Upload</span>\n                    </button>\n                  )}\n                  {item.hasLink && (\n                    <a \n                      href={item.linkTo} \n                      onClick={(e) => e.stopPropagation()}\n                      className=\"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1\"\n                    >\n                      <LinkIcon className=\"h-4 w-4\" />\n                      <span>{item.linkText}</span>\n                    </a>\n                  )}\n                  {item.popup && (\n                    <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n                      Click to edit\n                    </span>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showCompanyPopup && <QuickSetupModal \n        open={showCompanyPopup}\n        step={{ key: 'companyName', title: 'Company Name', description: 'Enter your company name', inputType: 'text', placeholder: 'Enter company name', hasUpload: false }}\n        stepIndex={0}\n        totalSteps={checklist.length}\n        values={{ companyName }}\n        setValues={setCompanyName}\n        onSave={handleCompanyNameSubmit}\n        onSkip={() => setShowCompanyPopup(false)}\n        onClose={() => setShowCompanyPopup(false)}\n        uploading={false}\n        uploadError=\"\"\n        setUploading={() => {}}\n        setUploadError={() => {}}\n      />}\n      {showCompanyNumberPopup && <QuickSetupModal \n        open={showCompanyNumberPopup}\n        step={{ key: 'companyNumber', title: 'Company Number', description: 'Enter your company number and incorporation date', inputType: 'text', placeholder: 'Enter company number', hasUpload: false }}\n        stepIndex={1}\n        totalSteps={checklist.length}\n        values={{ companyNumber, incorporationDate }}\n        setValues={{ companyNumber, incorporationDate }}\n        onSave={handleCompanyNumberSubmit}\n        onSkip={() => setShowCompanyNumberPopup(false)}\n        onClose={() => setShowCompanyNumberPopup(false)}\n        uploading={false}\n        uploadError=\"\"\n        setUploading={() => {}}\n        setUploadError={() => {}}\n      />}\n      {showOfficePopup && <QuickSetupModal \n        open={showOfficePopup}\n        step={{ key: 'office', title: 'Registered Office', description: 'Enter your registered office and contact information', inputType: 'text', placeholder: 'Enter registered office', hasUpload: false }}\n        stepIndex={2}\n        totalSteps={checklist.length}\n        values={{ registeredOffice, website, contactEmail, linkedinProfile }}\n        setValues={{ registeredOffice, website, contactEmail, linkedinProfile }}\n        onSave={handleOfficeSubmit}\n        onSkip={() => setShowOfficePopup(false)}\n        onClose={() => setShowOfficePopup(false)}\n        uploading={false}\n        uploadError=\"\"\n        setUploading={() => {}}\n        setUploadError={() => {}}\n      />}\n      {showBankPopup && <QuickSetupModal \n        open={showBankPopup}\n        step={{ key: 'bank', title: 'Business Bank Account', description: 'Enter your banking provider and account opened date', inputType: 'text', placeholder: 'Enter banking provider', hasUpload: false }}\n        stepIndex={8}\n        totalSteps={checklist.length}\n        values={{ bankProvider, bankAccountOpened }}\n        setValues={{ bankProvider, bankAccountOpened }}\n        onSave={handleBankSubmit}\n        onSkip={() => setShowBankPopup(false)}\n        onClose={() => setShowBankPopup(false)}\n        uploading={false}\n        uploadError=\"\"\n        setUploading={() => {}}\n        setUploadError={() => {}}\n      />}\n      {showVatPopup && <QuickSetupModal \n        open={showVatPopup}\n        step={{ key: 'vat', title: 'VAT Registration', description: 'Enter your VAT registration number and effective date', inputType: 'text', placeholder: 'Enter VAT registration number', hasUpload: false }}\n        stepIndex={9}\n        totalSteps={checklist.length}\n        values={{ vatNumber }}\n        setValues={{ vatNumber }}\n        onSave={handleVatSubmit}\n        onSkip={() => setShowVatPopup(false)}\n        onClose={() => setShowVatPopup(false)}\n        uploading={false}\n        uploadError=\"\"\n        setUploading={() => {}}\n        setUploadError={() => {}}\n      />}\n    </div>\n  );\n};\n\nexport default FoundationDocuments; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}