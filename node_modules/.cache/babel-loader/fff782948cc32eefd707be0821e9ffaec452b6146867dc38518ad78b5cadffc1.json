{"ast":null,"code":"var _jsxFileName = \"/Users/markgiblin/Desktop/layrbase/src/pages/legal/components/Contracts.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../../context/AuthContext';\nimport { loadContracts, updateContract, deleteContract } from '../../../services/contracts';\nimport DropdownMenu from './DropdownMenu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Contracts = () => {\n  _s();\n  const [contracts, setContracts] = useState([]);\n  const [folders, setFolders] = useState([]);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showFolderModal, setShowFolderModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const {\n    currentOrganization\n  } = useAuth();\n  const [showMoveToFolderModal, setShowMoveToFolderModal] = useState(false);\n  const [selectedContract, setSelectedContract] = useState(null);\n  useEffect(() => {\n    loadContracts();\n  }, [currentOrganization]);\n  const handleShowMoveToFolderModal = contract => {\n    setSelectedContract(contract);\n    setShowMoveToFolderModal(true);\n  };\n  const handleMoveContract = async newFolderId => {\n    if (!selectedContract) return;\n    setSaving(true);\n    try {\n      await updateContract(selectedContract.id, {\n        folder_id: newFolderId\n      });\n      await loadContracts();\n      setShowMoveToFolderModal(false);\n      setSelectedContract(null);\n    } catch (error) {\n      console.error(\"Error moving contract:\", error);\n      alert(\"Failed to move contract. Please try again.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(MoveToFolderModal, {\n      show: showMoveToFolderModal,\n      onClose: () => setShowMoveToFolderModal(false),\n      onSave: handleMoveContract,\n      folders: folders,\n      saving: saving\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(Contracts, \"Xqsul9jzSE99kYHZn+MJVNQYWoI=\", false, function () {\n  return [useAuth];\n});\n_c = Contracts;\nconst MoveToFolderModal = ({\n  show,\n  onClose,\n  onSave,\n  folders,\n  saving\n}) => {\n  _s2();\n  const [selectedFolderId, setSelectedFolderId] = useState('');\n  useEffect(() => {\n    if (show) {\n      setSelectedFolderId('');\n    }\n  }, [show]);\n  const handleSave = () => {\n    onSave(selectedFolderId || null); // Send null if no folder is selected (to move out of folders)\n  };\n  if (!show) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Move Contract to Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Select a new folder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedFolderId,\n            onChange: e => setSelectedFolderId(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"-- None (Remove from folder) --\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this), folders.map(folder => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: folder.id,\n              children: folder.name\n            }, folder.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n            disabled: saving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSave,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\",\n            disabled: saving,\n            children: saving ? 'Saving...' : 'Save'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s2(MoveToFolderModal, \"zL7nFHt9AoorZLGhPzjGXjZStCw=\");\n_c2 = MoveToFolderModal;\nconst UploadModal = ({\n  showModal,\n  onClose,\n  folders,\n  onUpload,\n  saving\n}) => {\n  _s3();\n  const [uploadData, setUploadData] = useState({\n    name: '',\n    description: '',\n    folderId: '',\n    file: null\n  });\n  // ... existing code ...\n};\n_s3(UploadModal, \"B9SAzq3NQE511MxTuZnqXsCZSPA=\");\n_c3 = UploadModal;\nexport default Contracts;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Contracts\");\n$RefreshReg$(_c2, \"MoveToFolderModal\");\n$RefreshReg$(_c3, \"UploadModal\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","loadContracts","updateContract","deleteContract","DropdownMenu","jsxDEV","_jsxDEV","Contracts","_s","contracts","setContracts","folders","setFolders","showUploadModal","setShowUploadModal","showFolderModal","setShowFolderModal","saving","setSaving","currentOrganization","showMoveToFolderModal","setShowMoveToFolderModal","selectedContract","setSelectedContract","handleShowMoveToFolderModal","contract","handleMoveContract","newFolderId","id","folder_id","error","console","alert","children","MoveToFolderModal","show","onClose","onSave","fileName","_jsxFileName","lineNumber","columnNumber","_c","_s2","selectedFolderId","setSelectedFolderId","handleSave","className","value","onChange","e","target","map","folder","name","type","onClick","disabled","_c2","UploadModal","showModal","onUpload","_s3","uploadData","setUploadData","description","folderId","file","_c3","$RefreshReg$"],"sources":["/Users/markgiblin/Desktop/layrbase/src/pages/legal/components/Contracts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../../context/AuthContext';\nimport { loadContracts, updateContract, deleteContract } from '../../../services/contracts';\nimport DropdownMenu from './DropdownMenu';\n\nconst Contracts = () => {\n  const [contracts, setContracts] = useState([]);\n  const [folders, setFolders] = useState([]);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showFolderModal, setShowFolderModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const { currentOrganization } = useAuth();\n  const [showMoveToFolderModal, setShowMoveToFolderModal] = useState(false);\n  const [selectedContract, setSelectedContract] = useState(null);\n\n  useEffect(() => {\n    loadContracts();\n  }, [currentOrganization]);\n\n  const handleShowMoveToFolderModal = (contract) => {\n    setSelectedContract(contract);\n    setShowMoveToFolderModal(true);\n  };\n\n  const handleMoveContract = async (newFolderId) => {\n    if (!selectedContract) return;\n\n    setSaving(true);\n    try {\n      await updateContract(selectedContract.id, { folder_id: newFolderId });\n      await loadContracts();\n      setShowMoveToFolderModal(false);\n      setSelectedContract(null);\n    } catch (error) {\n      console.error(\"Error moving contract:\", error);\n      alert(\"Failed to move contract. Please try again.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div>\n      {/* ... existing code ... */}\n      <MoveToFolderModal\n        show={showMoveToFolderModal}\n        onClose={() => setShowMoveToFolderModal(false)}\n        onSave={handleMoveContract}\n        folders={folders}\n        saving={saving}\n      />\n    </div>\n  );\n};\n\nconst MoveToFolderModal = ({ show, onClose, onSave, folders, saving }) => {\n  const [selectedFolderId, setSelectedFolderId] = useState('');\n\n  useEffect(() => {\n    if (show) {\n      setSelectedFolderId('');\n    }\n  }, [show]);\n\n  const handleSave = () => {\n    onSave(selectedFolderId || null); // Send null if no folder is selected (to move out of folders)\n  };\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Move Contract to Folder</h3>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Select a new folder</label>\n            <select\n              value={selectedFolderId}\n              onChange={(e) => setSelectedFolderId(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"\">-- None (Remove from folder) --</option>\n              {folders.map(folder => (\n                <option key={folder.id} value={folder.id}>{folder.name}</option>\n              ))}\n            </select>\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\" disabled={saving}>\n              Cancel\n            </button>\n            <button type=\"button\" onClick={handleSave} className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\" disabled={saving}>\n              {saving ? 'Saving...' : 'Save'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst UploadModal = ({ showModal, onClose, folders, onUpload, saving }) => {\n  const [uploadData, setUploadData] = useState({ name: '', description: '', folderId: '', file: null });\n  // ... existing code ...\n};\n\nexport default Contracts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}