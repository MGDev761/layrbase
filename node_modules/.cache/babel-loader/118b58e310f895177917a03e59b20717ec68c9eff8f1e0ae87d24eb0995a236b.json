{"ast":null,"code":"import { supabase } from '../lib/supabase';\n\n// Template operations\nexport const getTemplates = async () => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_templates').select('*').eq('is_active', true).order('name');\n  if (error) throw error;\n  return data;\n};\nexport const getTemplateById = async id => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_templates').select('*').eq('id', id).single();\n  if (error) throw error;\n  return data;\n};\n\n// Contract operations\nexport const getContracts = async organizationId => {\n  if (!organizationId) return [];\n  const {\n    data,\n    error\n  } = await supabase.from('legal_contracts').select('*').eq('organization_id', organizationId).order('created_at', {\n    ascending: false\n  });\n  if (error) {\n    console.error(\"Error fetching contracts:\", error);\n    throw error;\n  }\n  return data;\n};\nexport const createContractFromTemplate = async (templateId, contractData) => {\n  const {\n    data,\n    error\n  } = await supabase.rpc('create_contract_from_template', {\n    p_template_id: templateId,\n    p_name: contractData.name,\n    p_contract_data: contractData.data,\n    p_description: contractData.description,\n    p_folder_id: contractData.folderId,\n    p_effective_date: contractData.effectiveDate,\n    p_expiry_date: contractData.expiryDate,\n    p_organization_id: contractData.organizationId\n  });\n  if (error) throw error;\n  return data;\n};\nexport const createContract = async (contractData, organizationId) => {\n  if (!organizationId) {\n    throw new Error(\"User is not associated with an organization.\");\n  }\n  const {\n    data,\n    error\n  } = await supabase.rpc('create_contract_direct', {\n    p_name: contractData.name,\n    p_organization_id: organizationId,\n    p_description: contractData.description,\n    p_folder_id: contractData.folder_id\n  });\n  if (error) {\n    console.error('[legalService.createContract] RLS error:', error);\n    throw error;\n  }\n\n  // RPCs can return a single object or an array with one object. Normalize it.\n  const newContract = Array.isArray(data) ? data[0] : data;\n  return newContract;\n};\nexport const updateContract = async (id, updates) => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_contracts').update(updates).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n};\nexport const deleteContract = async id => {\n  const {\n    data,\n    error\n  } = await supabase.rpc('delete_contract', {\n    p_contract_id: id\n  });\n  if (error) {\n    console.error(\"Error calling delete_contract RPC:\", error);\n    throw error;\n  }\n  if (data && data.status === 'error') {\n    throw new Error(data.message);\n  }\n};\n\n// Contract folder operations\nexport const getContractFolders = async organizationId => {\n  if (!organizationId) throw new Error(\"No organization selected.\");\n  const {\n    data,\n    error\n  } = await supabase.from('legal_contract_folders').select('*').eq('organization_id', organizationId).order('name');\n  if (error) throw error;\n  return data;\n};\nexport const createContractFolder = async (folderData, organizationId) => {\n  if (!organizationId) {\n    throw new Error(\"User is not associated with an organization.\");\n  }\n  const {\n    data,\n    error\n  } = await supabase.from('legal_contract_folders').insert({\n    ...folderData,\n    organization_id: organizationId\n  }).select().single();\n  if (error) throw error;\n  return data;\n};\n\n// Compliance deadline operations\nexport const getComplianceDeadlines = async () => {\n  const {\n    data,\n    error\n  } = await supabase.rpc('get_organization_compliance_deadlines');\n  if (error) throw error;\n  return data;\n};\nexport const createComplianceDeadline = async deadlineData => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_compliance_deadlines').insert(deadlineData).select().single();\n  if (error) throw error;\n  return data;\n};\nexport const updateComplianceDeadline = async (id, updates) => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_compliance_deadlines').update(updates).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n};\nexport const deleteComplianceDeadline = async id => {\n  const {\n    error\n  } = await supabase.from('legal_compliance_deadlines').delete().eq('id', id);\n  if (error) throw error;\n};\n\n// Insurance policy operations\nexport const getInsurancePolicies = async () => {\n  const {\n    data,\n    error\n  } = await supabase.rpc('get_organization_insurance_policies');\n  if (error) throw error;\n  return data;\n};\nexport const createInsurancePolicy = async policyData => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_insurance_policies').insert(policyData).select().single();\n  if (error) throw error;\n  return data;\n};\nexport const updateInsurancePolicy = async (id, updates) => {\n  const {\n    data,\n    error\n  } = await supabase.from('legal_insurance_policies').update(updates).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n};\nexport const deleteInsurancePolicy = async id => {\n  const {\n    error\n  } = await supabase.from('legal_insurance_policies').delete().eq('id', id);\n  if (error) throw error;\n};\n\n// File upload operations\nexport const uploadContractPDF = async (file, contractId, organizationId) => {\n  if (!organizationId) {\n    console.error(\"uploadContractPDF: Missing organizationId\");\n    throw new Error(\"Cannot upload file: organization ID is missing.\");\n  }\n  const fileName = `${organizationId}/contracts/${contractId}/${file.name}`;\n  const {\n    data,\n    error\n  } = await supabase.storage.from('legal-documents').upload(fileName, file);\n  if (error) throw error;\n\n  // Get the public URL\n  const {\n    data: urlData\n  } = supabase.storage.from('legal-documents').getPublicUrl(fileName);\n\n  // Update the contract with the PDF path\n  await updateContract(contractId, {\n    pdf_file_path: urlData.publicUrl\n  });\n  return urlData.publicUrl;\n};\nexport const deleteContractFile = async filePath => {\n  // filePath is the full public URL. We need to extract the object path for the remove function.\n  // Example URL: https://<ref>.supabase.co/storage/v1/object/public/legal-documents/path/to/file.pdf\n  // We need: path/to/file.pdf\n  const path = new URL(filePath).pathname.split('/legal-documents/')[1];\n  if (!path) {\n    console.error(\"Could not determine file path from URL:\", filePath);\n    return; // Don't throw, just log the error and skip deletion\n  }\n  const {\n    error\n  } = await supabase.storage.from('legal-documents').remove([path]);\n  if (error) {\n    console.error(\"Error deleting contract file:\", error);\n    // Don't re-throw, as we want to proceed with deleting the DB record even if file deletion fails\n  }\n};\nexport const uploadPolicyDocument = async (file, policyId) => {\n  const fileName = `policies/${policyId}/${file.name}`;\n  const {\n    data,\n    error\n  } = await supabase.storage.from('legal-documents').upload(fileName, file);\n  if (error) throw error;\n\n  // Get the public URL\n  const {\n    data: urlData\n  } = supabase.storage.from('legal-documents').getPublicUrl(fileName);\n\n  // Update the policy with the document path\n  await updateInsurancePolicy(policyId, {\n    policy_document_path: urlData.publicUrl\n  });\n  return urlData.publicUrl;\n};\n\n// Utility functions\nexport const generateContractPDF = async (contractData, template) => {\n  // This would integrate with a PDF generation service\n  // For now, we'll return a mock PDF path\n  console.log('Generating PDF for contract:', contractData);\n\n  // In a real implementation, you would:\n  // 1. Replace placeholders in template content with contract data\n  // 2. Generate PDF using a service like Puppeteer, jsPDF, or external API\n  // 3. Upload the generated PDF to storage\n  // 4. Return the file path\n\n  return `/mock-pdf-path/${contractData.name}.pdf`;\n};\nexport const debugRls = async organizationId => {\n  if (!organizationId) {\n    alert('DEBUG: No org ID passed to debugRls');\n    return null;\n  }\n  const {\n    data,\n    error\n  } = await supabase.rpc('debug_get_rls_context', {\n    p_org_id: organizationId\n  });\n  if (error) {\n    alert(`DEBUG: Error calling debug function: ${error.message}`);\n    return null;\n  }\n  return data[0];\n};","map":{"version":3,"names":["supabase","getTemplates","data","error","from","select","eq","order","getTemplateById","id","single","getContracts","organizationId","ascending","console","createContractFromTemplate","templateId","contractData","rpc","p_template_id","p_name","name","p_contract_data","p_description","description","p_folder_id","folderId","p_effective_date","effectiveDate","p_expiry_date","expiryDate","p_organization_id","createContract","Error","folder_id","newContract","Array","isArray","updateContract","updates","update","deleteContract","p_contract_id","status","message","getContractFolders","createContractFolder","folderData","insert","organization_id","getComplianceDeadlines","createComplianceDeadline","deadlineData","updateComplianceDeadline","deleteComplianceDeadline","delete","getInsurancePolicies","createInsurancePolicy","policyData","updateInsurancePolicy","deleteInsurancePolicy","uploadContractPDF","file","contractId","fileName","storage","upload","urlData","getPublicUrl","pdf_file_path","publicUrl","deleteContractFile","filePath","path","URL","pathname","split","remove","uploadPolicyDocument","policyId","policy_document_path","generateContractPDF","template","log","debugRls","alert","p_org_id"],"sources":["/Users/markgiblin/Desktop/layrbase/src/services/legalService.js"],"sourcesContent":["import { supabase } from '../lib/supabase';\n\n// Template operations\nexport const getTemplates = async () => {\n  const { data, error } = await supabase\n    .from('legal_templates')\n    .select('*')\n    .eq('is_active', true)\n    .order('name');\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const getTemplateById = async (id) => {\n  const { data, error } = await supabase\n    .from('legal_templates')\n    .select('*')\n    .eq('id', id)\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\n// Contract operations\nexport const getContracts = async (organizationId) => {\n  if (!organizationId) return [];\n\n  const { data, error } = await supabase\n    .from('legal_contracts')\n    .select('*')\n    .eq('organization_id', organizationId)\n    .order('created_at', { ascending: false });\n  \n  if (error) {\n    console.error(\"Error fetching contracts:\", error);\n    throw error;\n  }\n  return data;\n};\n\nexport const createContractFromTemplate = async (templateId, contractData) => {\n  const { data, error } = await supabase\n    .rpc('create_contract_from_template', {\n      p_template_id: templateId,\n      p_name: contractData.name,\n      p_contract_data: contractData.data,\n      p_description: contractData.description,\n      p_folder_id: contractData.folderId,\n      p_effective_date: contractData.effectiveDate,\n      p_expiry_date: contractData.expiryDate,\n      p_organization_id: contractData.organizationId\n    });\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const createContract = async (contractData, organizationId) => {\n  if (!organizationId) {\n    throw new Error(\"User is not associated with an organization.\");\n  }\n\n  const { data, error } = await supabase\n    .rpc('create_contract_direct', {\n      p_name: contractData.name,\n      p_organization_id: organizationId,\n      p_description: contractData.description,\n      p_folder_id: contractData.folder_id\n    });\n  \n  if (error) {\n    console.error('[legalService.createContract] RLS error:', error);\n    throw error;\n  }\n  \n  // RPCs can return a single object or an array with one object. Normalize it.\n  const newContract = Array.isArray(data) ? data[0] : data;\n  return newContract;\n};\n\nexport const updateContract = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('legal_contracts')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const deleteContract = async (id) => {\n  const { data, error } = await supabase\n    .rpc('delete_contract', { p_contract_id: id });\n  \n  if (error) {\n    console.error(\"Error calling delete_contract RPC:\", error);\n    throw error;\n  }\n\n  if (data && data.status === 'error') {\n    throw new Error(data.message);\n  }\n};\n\n// Contract folder operations\nexport const getContractFolders = async (organizationId) => {\n  if (!organizationId) throw new Error(\"No organization selected.\");\n  const { data, error } = await supabase\n    .from('legal_contract_folders')\n    .select('*')\n    .eq('organization_id', organizationId)\n    .order('name');\n  if (error) throw error;\n  return data;\n};\n\nexport const createContractFolder = async (folderData, organizationId) => {\n  if (!organizationId) {\n    throw new Error(\"User is not associated with an organization.\");\n  }\n\n  const { data, error } = await supabase\n    .from('legal_contract_folders')\n    .insert({ ...folderData, organization_id: organizationId })\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\n// Compliance deadline operations\nexport const getComplianceDeadlines = async () => {\n  const { data, error } = await supabase\n    .rpc('get_organization_compliance_deadlines');\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const createComplianceDeadline = async (deadlineData) => {\n  const { data, error } = await supabase\n    .from('legal_compliance_deadlines')\n    .insert(deadlineData)\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const updateComplianceDeadline = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('legal_compliance_deadlines')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const deleteComplianceDeadline = async (id) => {\n  const { error } = await supabase\n    .from('legal_compliance_deadlines')\n    .delete()\n    .eq('id', id);\n  \n  if (error) throw error;\n};\n\n// Insurance policy operations\nexport const getInsurancePolicies = async () => {\n  const { data, error } = await supabase\n    .rpc('get_organization_insurance_policies');\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const createInsurancePolicy = async (policyData) => {\n  const { data, error } = await supabase\n    .from('legal_insurance_policies')\n    .insert(policyData)\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const updateInsurancePolicy = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('legal_insurance_policies')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  \n  if (error) throw error;\n  return data;\n};\n\nexport const deleteInsurancePolicy = async (id) => {\n  const { error } = await supabase\n    .from('legal_insurance_policies')\n    .delete()\n    .eq('id', id);\n  \n  if (error) throw error;\n};\n\n// File upload operations\nexport const uploadContractPDF = async (file, contractId, organizationId) => {\n  if (!organizationId) {\n    console.error(\"uploadContractPDF: Missing organizationId\");\n    throw new Error(\"Cannot upload file: organization ID is missing.\");\n  }\n  const fileName = `${organizationId}/contracts/${contractId}/${file.name}`;\n  \n  const { data, error } = await supabase.storage\n    .from('legal-documents')\n    .upload(fileName, file);\n  \n  if (error) throw error;\n  \n  // Get the public URL\n  const { data: urlData } = supabase.storage\n    .from('legal-documents')\n    .getPublicUrl(fileName);\n  \n  // Update the contract with the PDF path\n  await updateContract(contractId, { pdf_file_path: urlData.publicUrl });\n  \n  return urlData.publicUrl;\n};\n\nexport const deleteContractFile = async (filePath) => {\n  // filePath is the full public URL. We need to extract the object path for the remove function.\n  // Example URL: https://<ref>.supabase.co/storage/v1/object/public/legal-documents/path/to/file.pdf\n  // We need: path/to/file.pdf\n  const path = new URL(filePath).pathname.split('/legal-documents/')[1];\n  \n  if (!path) {\n    console.error(\"Could not determine file path from URL:\", filePath);\n    return; // Don't throw, just log the error and skip deletion\n  }\n\n  const { error } = await supabase.storage\n    .from('legal-documents')\n    .remove([path]);\n  \n  if (error) {\n    console.error(\"Error deleting contract file:\", error);\n    // Don't re-throw, as we want to proceed with deleting the DB record even if file deletion fails\n  }\n};\n\nexport const uploadPolicyDocument = async (file, policyId) => {\n  const fileName = `policies/${policyId}/${file.name}`;\n  \n  const { data, error } = await supabase.storage\n    .from('legal-documents')\n    .upload(fileName, file);\n  \n  if (error) throw error;\n  \n  // Get the public URL\n  const { data: urlData } = supabase.storage\n    .from('legal-documents')\n    .getPublicUrl(fileName);\n  \n  // Update the policy with the document path\n  await updateInsurancePolicy(policyId, { policy_document_path: urlData.publicUrl });\n  \n  return urlData.publicUrl;\n};\n\n// Utility functions\nexport const generateContractPDF = async (contractData, template) => {\n  // This would integrate with a PDF generation service\n  // For now, we'll return a mock PDF path\n  console.log('Generating PDF for contract:', contractData);\n  \n  // In a real implementation, you would:\n  // 1. Replace placeholders in template content with contract data\n  // 2. Generate PDF using a service like Puppeteer, jsPDF, or external API\n  // 3. Upload the generated PDF to storage\n  // 4. Return the file path\n  \n  return `/mock-pdf-path/${contractData.name}.pdf`;\n};\n\nexport const debugRls = async (organizationId) => {\n  if (!organizationId) {\n    alert('DEBUG: No org ID passed to debugRls');\n    return null;\n  }\n  const { data, error } = await supabase.rpc('debug_get_rls_context', {\n    p_org_id: organizationId,\n  });\n\n  if (error) {\n    alert(`DEBUG: Error calling debug function: ${error.message}`);\n    return null;\n  }\n\n  return data[0];\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}