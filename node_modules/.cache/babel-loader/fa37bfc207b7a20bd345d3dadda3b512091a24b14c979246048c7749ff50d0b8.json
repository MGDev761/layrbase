{"ast":null,"code":"var _jsxFileName = \"/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { CheckCircleIcon, ArrowUpOnSquareIcon, XMarkIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst steps = [{\n  key: 'companyName',\n  label: 'Company Name & Logo',\n  description: 'Set your legal company name and upload your logo.',\n  fields: ['name', 'logo'],\n  uploadType: 'logo'\n}, {\n  key: 'companyNumber',\n  label: 'Company Number & Incorporation Date',\n  description: 'Record the Companies House number and date of incorporation.',\n  fields: ['company_number', 'incorporation_date']\n}, {\n  key: 'registeredOffice',\n  label: 'Registered Office & Contact Info',\n  description: 'Store your legal address, website, and contact emails.',\n  fields: ['registered_office', 'website', 'contact_email', 'linkedin_profile']\n}, {\n  key: 'foundersAgreement',\n  label: 'Founders Agreement',\n  description: 'Upload your signed founders agreement. If you don\\'t have one, you can get a template in the legal section.',\n  fields: ['founders_agreement'],\n  uploadType: 'document',\n  uploadNote: 'A founders agreement sets out the rights and responsibilities of each founder. If you don\\'t have one, get a template in the Legal section.'\n}\n// ... add more steps as needed ...\n];\nconst FoundationDocuments = () => {\n  _s();\n  const {\n    currentOrganization\n  } = useAuth();\n  const [showWizard, setShowWizard] = useState(false);\n  const [stepIndex, setStepIndex] = useState(0);\n  const [form, setForm] = useState({\n    name: '',\n    logoUrl: '',\n    company_number: '',\n    incorporation_date: '',\n    registered_office: '',\n    website: '',\n    contact_email: '',\n    linkedin_profile: '',\n    founders_agreement: ''\n  });\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef();\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setForm(f => ({\n          ...f,\n          name: data.name || '',\n          logoUrl: data.logo_url || '',\n          company_number: data.company_number || '',\n          incorporation_date: data.incorporation_date || '',\n          registered_office: data.registered_office || '',\n          website: data.website || '',\n          contact_email: data.contact_email || '',\n          linkedin_profile: data.linkedin_profile || '',\n          founders_agreement: data.founders_agreement || ''\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n  const handleInput = (field, value) => {\n    setForm(f => ({\n      ...f,\n      [field]: value\n    }));\n  };\n  const handleLogoUpload = async e => {\n    const file = e.target.files[0];\n    if (!file || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('company-logos').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      setError('Error uploading logo: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const {\n      data: publicUrlData,\n      error: urlError\n    } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !(publicUrlData !== null && publicUrlData !== void 0 && publicUrlData.publicUrl)) {\n      setError('Error getting logo URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({\n      ...f,\n      logoUrl: publicUrlData.publicUrl\n    }));\n    setSaving(false);\n  };\n  const handleFileUpload = async (field, e) => {\n    const file = e.target.files[0];\n    if (!file || !(currentOrganization !== null && currentOrganization !== void 0 && currentOrganization.organization_id)) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/${field}.${fileExt}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('company-foundations').upload(filePath, file, {\n      upsert: true\n    });\n    if (uploadError) {\n      setError('Error uploading file: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const {\n      data: publicUrlData,\n      error: urlError\n    } = supabase.storage.from('company-foundations').getPublicUrl(filePath);\n    if (urlError || !(publicUrlData !== null && publicUrlData !== void 0 && publicUrlData.publicUrl)) {\n      setError('Error getting file URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({\n      ...f,\n      [field]: publicUrlData.publicUrl\n    }));\n    setSaving(false);\n  };\n  const handleNext = async () => {\n    setSaving(true);\n    setError('');\n    const step = steps[stepIndex];\n    const payload = {\n      organization_id: currentOrganization.organization_id\n    };\n    step.fields.forEach(field => {\n      if (field === 'logo') {\n        payload['logo_url'] = form.logoUrl;\n      } else {\n        payload[field] = form[field];\n      }\n    });\n    try {\n      await upsertCompanyProfile(payload);\n      setStepIndex(i => i + 1);\n    } catch (err) {\n      setError(err.message || 'Failed to save.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleBack = () => {\n    setStepIndex(i => Math.max(0, i - 1));\n    setError('');\n  };\n  const closeWizard = () => {\n    setShowWizard(false);\n    setStepIndex(0);\n    setError('');\n  };\n\n  // Validation for Save & Next\n  const isStepValid = (() => {\n    const step = steps[stepIndex];\n    return step.fields.every(field => {\n      if (field === 'logo') return !!form.logoUrl;\n      return form[field] && form[field].toString().trim() !== '';\n    });\n  })();\n\n  // Modal UI\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow border border-gray-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 py-4 border-b border-gray-200 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-gray-900\",\n        children: \"Company Setup Wizard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-blue-600 text-sm font-semibold hover:underline\",\n        onClick: () => setShowWizard(true),\n        children: \"Start with Company Name \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), showWizard && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 bg-black bg-opacity-40\",\n        onClick: closeWizard\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative h-full w-full sm:w-[40vw] max-w-xl bg-white shadow-2xl p-0 flex flex-col transform transition-transform duration-500 ease-in-out translate-x-0\",\n        style: {\n          right: 0\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl z-10\",\n          onClick: closeWizard,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-10 flex flex-col items-center justify-center h-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-8 w-full text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg text-gray-500 mb-2\",\n              children: [\"Step \", stepIndex + 1, \" of \", steps.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-3xl font-extrabold text-gray-900 mb-2\",\n              style: {\n                fontFamily: 'Inter, sans-serif'\n              },\n              children: steps[stepIndex].label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-md text-gray-600 mb-6 max-w-md mx-auto\",\n              children: steps[stepIndex].description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), steps[stepIndex].fields.map(field => {\n            if (field === 'name') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Company Name\",\n                value: form.name,\n                onChange: e => handleInput('name', e.target.value),\n                autoFocus: true\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'logo') {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-center mb-6 w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-28 h-28 rounded-full flex items-center justify-center bg-gray-100 mb-4 overflow-hidden\",\n                  children: form.logoUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: form.logoUrl,\n                    alt: \"Logo\",\n                    className: \"object-contain w-full h-full\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-400 text-4xl font-bold\",\n                    children: \"Logo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  ref: fileInputRef,\n                  onChange: handleLogoUpload,\n                  className: \"hidden\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => fileInputRef.current && fileInputRef.current.click(),\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\",\n                  children: form.logoUrl ? 'Change Logo' : 'Upload Logo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 23\n                }, this)]\n              }, field, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'company_number') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Company Number\",\n                value: form.company_number,\n                onChange: e => handleInput('company_number', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'incorporation_date') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                value: form.incorporation_date,\n                onChange: e => handleInput('incorporation_date', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'registered_office') {\n              return /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Registered Office Address\",\n                value: form.registered_office,\n                onChange: e => handleInput('registered_office', e.target.value),\n                rows: 3\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'website') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"url\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Website\",\n                value: form.website,\n                onChange: e => handleInput('website', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'contact_email') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"Contact Email\",\n                value: form.contact_email,\n                onChange: e => handleInput('contact_email', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'linkedin_profile') {\n              return /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"url\",\n                className: \"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\",\n                placeholder: \"LinkedIn Profile\",\n                value: form.linkedin_profile,\n                onChange: e => handleInput('linkedin_profile', e.target.value)\n              }, field, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this);\n            }\n            if (field === 'founders_agreement') {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col items-center mb-6 w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-md font-semibold text-gray-700 mb-2\",\n                  children: \"Upload Founders Agreement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"application/pdf,.doc,.docx\",\n                  onChange: e => handleFileUpload('founders_agreement', e),\n                  className: \"mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 23\n                }, this), form.founders_agreement && /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: form.founders_agreement,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"text-blue-600 underline text-sm mb-2\",\n                  children: \"View Uploaded File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 mt-2 text-center\",\n                  children: [\"A founders agreement sets out the rights and responsibilities of each founder.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 103\n                  }, this), \"If you don't have one, get a template in the \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-purple-600\",\n                    children: \"Legal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 75\n                  }, this), \" section.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this)]\n              }, field, true, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 21\n              }, this);\n            }\n            return null;\n          }), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-600 text-sm mt-2\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center w-full mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleBack,\n              className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n              disabled: stepIndex === 0 || saving,\n              children: \"Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleNext,\n              className: `px-6 py-2 rounded-md text-white text-lg font-semibold transition-colors ${isStepValid ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-300 cursor-not-allowed'}`,\n              disabled: !isStepValid || saving,\n              children: stepIndex === steps.length - 1 ? 'Finish' : 'Save & Next'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n_s(FoundationDocuments, \"M93M41ZVfHtYgEQqw2W+SCxQOvg=\", false, function () {\n  return [useAuth];\n});\n_c = FoundationDocuments;\nexport default FoundationDocuments;\nvar _c;\n$RefreshReg$(_c, \"FoundationDocuments\");","map":{"version":3,"names":["React","useState","useEffect","useRef","CheckCircleIcon","ArrowUpOnSquareIcon","XMarkIcon","useAuth","getCompanyProfile","upsertCompanyProfile","supabase","jsxDEV","_jsxDEV","steps","key","label","description","fields","uploadType","uploadNote","FoundationDocuments","_s","currentOrganization","showWizard","setShowWizard","stepIndex","setStepIndex","form","setForm","name","logoUrl","company_number","incorporation_date","registered_office","website","contact_email","linkedin_profile","founders_agreement","saving","setSaving","error","setError","fileInputRef","fetchProfile","organization_id","data","f","logo_url","handleInput","field","value","handleLogoUpload","e","file","target","files","fileExt","split","pop","filePath","uploadError","storage","from","upload","upsert","message","publicUrlData","urlError","getPublicUrl","publicUrl","handleFileUpload","handleNext","step","payload","forEach","i","err","handleBack","Math","max","closeWizard","isStepValid","every","toString","trim","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","right","length","fontFamily","map","type","placeholder","onChange","autoFocus","src","alt","accept","ref","current","click","rows","href","rel","disabled","_c","$RefreshReg$"],"sources":["/Users/markgiblin/Desktop/layrbase/src/pages/company-setup/components/foundation/FoundationDocuments.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CheckCircleIcon, ArrowUpOnSquareIcon, XMarkIcon } from '@heroicons/react/20/solid';\nimport { useAuth } from '../../../../contexts/AuthContext';\nimport { getCompanyProfile, upsertCompanyProfile } from '../../../../services/legalService';\nimport { supabase } from '../../../../lib/supabase';\n\nconst steps = [\n  {\n    key: 'companyName',\n    label: 'Company Name & Logo',\n    description: 'Set your legal company name and upload your logo.',\n    fields: ['name', 'logo'],\n    uploadType: 'logo',\n  },\n  {\n    key: 'companyNumber',\n    label: 'Company Number & Incorporation Date',\n    description: 'Record the Companies House number and date of incorporation.',\n    fields: ['company_number', 'incorporation_date'],\n  },\n  {\n    key: 'registeredOffice',\n    label: 'Registered Office & Contact Info',\n    description: 'Store your legal address, website, and contact emails.',\n    fields: ['registered_office', 'website', 'contact_email', 'linkedin_profile'],\n  },\n  {\n    key: 'foundersAgreement',\n    label: 'Founders Agreement',\n    description: 'Upload your signed founders agreement. If you don\\'t have one, you can get a template in the legal section.',\n    fields: ['founders_agreement'],\n    uploadType: 'document',\n    uploadNote: 'A founders agreement sets out the rights and responsibilities of each founder. If you don\\'t have one, get a template in the Legal section.'\n  },\n  // ... add more steps as needed ...\n];\n\nconst FoundationDocuments = () => {\n  const { currentOrganization } = useAuth();\n  const [showWizard, setShowWizard] = useState(false);\n  const [stepIndex, setStepIndex] = useState(0);\n  const [form, setForm] = useState({\n    name: '',\n    logoUrl: '',\n    company_number: '',\n    incorporation_date: '',\n    registered_office: '',\n    website: '',\n    contact_email: '',\n    linkedin_profile: '',\n    founders_agreement: '',\n  });\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef();\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (!currentOrganization?.organization_id) return;\n      const data = await getCompanyProfile(currentOrganization.organization_id);\n      if (data) {\n        setForm(f => ({\n          ...f,\n          name: data.name || '',\n          logoUrl: data.logo_url || '',\n          company_number: data.company_number || '',\n          incorporation_date: data.incorporation_date || '',\n          registered_office: data.registered_office || '',\n          website: data.website || '',\n          contact_email: data.contact_email || '',\n          linkedin_profile: data.linkedin_profile || '',\n          founders_agreement: data.founders_agreement || '',\n        }));\n      }\n    };\n    fetchProfile();\n  }, [currentOrganization]);\n\n  const handleInput = (field, value) => {\n    setForm(f => ({ ...f, [field]: value }));\n  };\n\n  const handleLogoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file || !currentOrganization?.organization_id) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/logo.${fileExt}`;\n    const { error: uploadError } = await supabase.storage.from('company-logos').upload(filePath, file, { upsert: true });\n    if (uploadError) {\n      setError('Error uploading logo: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const { data: publicUrlData, error: urlError } = supabase.storage.from('company-logos').getPublicUrl(filePath);\n    if (urlError || !publicUrlData?.publicUrl) {\n      setError('Error getting logo URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({ ...f, logoUrl: publicUrlData.publicUrl }));\n    setSaving(false);\n  };\n\n  const handleFileUpload = async (field, e) => {\n    const file = e.target.files[0];\n    if (!file || !currentOrganization?.organization_id) return;\n    setSaving(true);\n    setError('');\n    const fileExt = file.name.split('.').pop();\n    const filePath = `${currentOrganization.organization_id}/${field}.${fileExt}`;\n    const { error: uploadError } = await supabase.storage.from('company-foundations').upload(filePath, file, { upsert: true });\n    if (uploadError) {\n      setError('Error uploading file: ' + uploadError.message);\n      setSaving(false);\n      return;\n    }\n    const { data: publicUrlData, error: urlError } = supabase.storage.from('company-foundations').getPublicUrl(filePath);\n    if (urlError || !publicUrlData?.publicUrl) {\n      setError('Error getting file URL');\n      setSaving(false);\n      return;\n    }\n    setForm(f => ({ ...f, [field]: publicUrlData.publicUrl }));\n    setSaving(false);\n  };\n\n  const handleNext = async () => {\n    setSaving(true);\n    setError('');\n    const step = steps[stepIndex];\n    const payload = { organization_id: currentOrganization.organization_id };\n    step.fields.forEach(field => {\n      if (field === 'logo') {\n        payload['logo_url'] = form.logoUrl;\n      } else {\n        payload[field] = form[field];\n      }\n    });\n    try {\n      await upsertCompanyProfile(payload);\n      setStepIndex(i => i + 1);\n    } catch (err) {\n      setError(err.message || 'Failed to save.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleBack = () => {\n    setStepIndex(i => Math.max(0, i - 1));\n    setError('');\n  };\n\n  const closeWizard = () => {\n    setShowWizard(false);\n    setStepIndex(0);\n    setError('');\n  };\n\n  // Validation for Save & Next\n  const isStepValid = (() => {\n    const step = steps[stepIndex];\n    return step.fields.every(field => {\n      if (field === 'logo') return !!form.logoUrl;\n      return form[field] && form[field].toString().trim() !== '';\n    });\n  })();\n\n  // Modal UI\n  return (\n    <div className=\"bg-white rounded-lg shadow border border-gray-200\">\n      <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n        <h2 className=\"text-xl font-bold text-gray-900\">Company Setup Wizard</h2>\n        <button\n          className=\"text-blue-600 text-sm font-semibold hover:underline\"\n          onClick={() => setShowWizard(true)}\n        >\n          Start with Company Name &rarr;\n        </button>\n      </div>\n      {showWizard && (\n        <div className=\"fixed inset-0 z-50 flex\">\n          <div className=\"flex-1 bg-black bg-opacity-40\" onClick={closeWizard} />\n          <div className=\"relative h-full w-full sm:w-[40vw] max-w-xl bg-white shadow-2xl p-0 flex flex-col transform transition-transform duration-500 ease-in-out translate-x-0\" style={{ right: 0 }}>\n            <button className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl z-10\" onClick={closeWizard}>&times;</button>\n            <div className=\"p-10 flex flex-col items-center justify-center h-full\">\n              <div className=\"mb-8 w-full text-center\">\n                <div className=\"text-lg text-gray-500 mb-2\">Step {stepIndex + 1} of {steps.length}</div>\n                <div className=\"text-3xl font-extrabold text-gray-900 mb-2\" style={{ fontFamily: 'Inter, sans-serif' }}>{steps[stepIndex].label}</div>\n                <div className=\"text-md text-gray-600 mb-6 max-w-md mx-auto\">{steps[stepIndex].description}</div>\n              </div>\n              {/* Step content */}\n              {steps[stepIndex].fields.map(field => {\n                if (field === 'name') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"text\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Company Name\"\n                      value={form.name}\n                      onChange={e => handleInput('name', e.target.value)}\n                      autoFocus\n                    />\n                  );\n                }\n                if (field === 'logo') {\n                  return (\n                    <div key={field} className=\"flex flex-col items-center mb-6 w-full\">\n                      <div className=\"w-28 h-28 rounded-full flex items-center justify-center bg-gray-100 mb-4 overflow-hidden\">\n                        {form.logoUrl ? (\n                          <img src={form.logoUrl} alt=\"Logo\" className=\"object-contain w-full h-full\" />\n                        ) : (\n                          <span className=\"text-gray-400 text-4xl font-bold\">Logo</span>\n                        )}\n                      </div>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        ref={fileInputRef}\n                        onChange={handleLogoUpload}\n                        className=\"hidden\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current && fileInputRef.current.click()}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\"\n                      >\n                        {form.logoUrl ? 'Change Logo' : 'Upload Logo'}\n                      </button>\n                    </div>\n                  );\n                }\n                if (field === 'company_number') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"text\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Company Number\"\n                      value={form.company_number}\n                      onChange={e => handleInput('company_number', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'incorporation_date') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"date\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      value={form.incorporation_date}\n                      onChange={e => handleInput('incorporation_date', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'registered_office') {\n                  return (\n                    <textarea\n                      key={field}\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Registered Office Address\"\n                      value={form.registered_office}\n                      onChange={e => handleInput('registered_office', e.target.value)}\n                      rows={3}\n                    />\n                  );\n                }\n                if (field === 'website') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"url\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Website\"\n                      value={form.website}\n                      onChange={e => handleInput('website', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'contact_email') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"email\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"Contact Email\"\n                      value={form.contact_email}\n                      onChange={e => handleInput('contact_email', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'linkedin_profile') {\n                  return (\n                    <input\n                      key={field}\n                      type=\"url\"\n                      className=\"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6\"\n                      placeholder=\"LinkedIn Profile\"\n                      value={form.linkedin_profile}\n                      onChange={e => handleInput('linkedin_profile', e.target.value)}\n                    />\n                  );\n                }\n                if (field === 'founders_agreement') {\n                  return (\n                    <div key={field} className=\"flex flex-col items-center mb-6 w-full\">\n                      <label className=\"block text-md font-semibold text-gray-700 mb-2\">Upload Founders Agreement</label>\n                      <input\n                        type=\"file\"\n                        accept=\"application/pdf,.doc,.docx\"\n                        onChange={e => handleFileUpload('founders_agreement', e)}\n                        className=\"mb-2\"\n                      />\n                      {form.founders_agreement && (\n                        <a href={form.founders_agreement} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline text-sm mb-2\">View Uploaded File</a>\n                      )}\n                      <div className=\"text-xs text-gray-500 mt-2 text-center\">\n                        A founders agreement sets out the rights and responsibilities of each founder.<br />\n                        If you don&apos;t have one, get a template in the <span className=\"font-semibold text-purple-600\">Legal</span> section.\n                      </div>\n                    </div>\n                  );\n                }\n                return null;\n              })}\n              {error && <div className=\"text-red-600 text-sm mt-2\">{error}</div>}\n              <div className=\"flex justify-between items-center w-full mt-8\">\n                <button\n                  type=\"button\"\n                  onClick={handleBack}\n                  className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\"\n                  disabled={stepIndex === 0 || saving}\n                >\n                  Back\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleNext}\n                  className={`px-6 py-2 rounded-md text-white text-lg font-semibold transition-colors ${isStepValid ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-300 cursor-not-allowed'}`}\n                  disabled={!isStepValid || saving}\n                >\n                  {stepIndex === steps.length - 1 ? 'Finish' : 'Save & Next'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FoundationDocuments; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}