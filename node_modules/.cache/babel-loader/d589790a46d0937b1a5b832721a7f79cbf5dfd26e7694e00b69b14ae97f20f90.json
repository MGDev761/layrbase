{"ast":null,"code":"import { supabase } from '../lib/supabase';\n\n// Fetch all employees for an organization\nexport async function fetchEmployees(organization_id) {\n  const {\n    data,\n    error\n  } = await supabase.from('employees').select('*').eq('organization_id', organization_id).order('name');\n  if (error) throw error;\n  return data;\n}\n\n// Fetch employee by user_id\nexport async function fetchEmployeeByUserId(user_id) {\n  const {\n    data,\n    error\n  } = await supabase.from('employees').select('*').eq('user_id', user_id).single();\n  if (error) throw error;\n  return data;\n}\n\n// Add a new employee\nexport async function addEmployee(employee) {\n  const {\n    data,\n    error\n  } = await supabase.from('employees').insert([employee]).select().single();\n  if (error) throw error;\n  return data;\n}\n\n// Update an employee\nexport async function updateEmployee(id, updates) {\n  const {\n    data,\n    error\n  } = await supabase.from('employees').update(updates).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n}\n\n// Link a user to an employee\nexport async function linkUserToEmployee(employeeId, userId) {\n  return updateEmployee(employeeId, {\n    user_id: userId\n  });\n}\n\n// Unlink a user from an employee\nexport async function unlinkUserFromEmployee(employeeId) {\n  return updateEmployee(employeeId, {\n    user_id: null\n  });\n}\n\n// Delete an employee\nexport async function deleteEmployee(id) {\n  const {\n    error\n  } = await supabase.from('employees').delete().eq('id', id);\n  if (error) throw error;\n}\n\n// Fetch org chart (all employees with manager_id)\nexport async function fetchOrgChart(organization_id) {\n  const {\n    data,\n    error\n  } = await supabase.from('employees').select('*').eq('organization_id', organization_id);\n  if (error) throw error;\n  return data;\n}","map":{"version":3,"names":["supabase","fetchEmployees","organization_id","data","error","from","select","eq","order","fetchEmployeeByUserId","user_id","single","addEmployee","employee","insert","updateEmployee","id","updates","update","linkUserToEmployee","employeeId","userId","unlinkUserFromEmployee","deleteEmployee","delete","fetchOrgChart"],"sources":["/Users/markgiblin/Desktop/layrbase/src/services/employeesService.js"],"sourcesContent":["import { supabase } from '../lib/supabase';\n\n// Fetch all employees for an organization\nexport async function fetchEmployees(organization_id) {\n  const { data, error } = await supabase\n    .from('employees')\n    .select('*')\n    .eq('organization_id', organization_id)\n    .order('name');\n  if (error) throw error;\n  return data;\n}\n\n// Fetch employee by user_id\nexport async function fetchEmployeeByUserId(user_id) {\n  const { data, error } = await supabase\n    .from('employees')\n    .select('*')\n    .eq('user_id', user_id)\n    .single();\n  if (error) throw error;\n  return data;\n}\n\n// Add a new employee\nexport async function addEmployee(employee) {\n  const { data, error } = await supabase\n    .from('employees')\n    .insert([employee])\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n}\n\n// Update an employee\nexport async function updateEmployee(id, updates) {\n  const { data, error } = await supabase\n    .from('employees')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n}\n\n// Link a user to an employee\nexport async function linkUserToEmployee(employeeId, userId) {\n  return updateEmployee(employeeId, { user_id: userId });\n}\n\n// Unlink a user from an employee\nexport async function unlinkUserFromEmployee(employeeId) {\n  return updateEmployee(employeeId, { user_id: null });\n}\n\n// Delete an employee\nexport async function deleteEmployee(id) {\n  const { error } = await supabase\n    .from('employees')\n    .delete()\n    .eq('id', id);\n  if (error) throw error;\n}\n\n// Fetch org chart (all employees with manager_id)\nexport async function fetchOrgChart(organization_id) {\n  const { data, error } = await supabase\n    .from('employees')\n    .select('*')\n    .eq('organization_id', organization_id);\n  if (error) throw error;\n  return data;\n} "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;;AAE1C;AACA,OAAO,eAAeC,cAAcA,CAACC,eAAe,EAAE;EACpD,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,iBAAiB,EAAEL,eAAe,CAAC,CACtCM,KAAK,CAAC,MAAM,CAAC;EAChB,IAAIJ,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAeM,qBAAqBA,CAACC,OAAO,EAAE;EACnD,MAAM;IAAEP,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,SAAS,EAAEG,OAAO,CAAC,CACtBC,MAAM,CAAC,CAAC;EACX,IAAIP,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAeS,WAAWA,CAACC,QAAQ,EAAE;EAC1C,MAAM;IAAEV,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,WAAW,CAAC,CACjBS,MAAM,CAAC,CAACD,QAAQ,CAAC,CAAC,CAClBP,MAAM,CAAC,CAAC,CACRK,MAAM,CAAC,CAAC;EACX,IAAIP,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAeY,cAAcA,CAACC,EAAE,EAAEC,OAAO,EAAE;EAChD,MAAM;IAAEd,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,WAAW,CAAC,CACjBa,MAAM,CAACD,OAAO,CAAC,CACfV,EAAE,CAAC,IAAI,EAAES,EAAE,CAAC,CACZV,MAAM,CAAC,CAAC,CACRK,MAAM,CAAC,CAAC;EACX,IAAIP,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb;;AAEA;AACA,OAAO,eAAegB,kBAAkBA,CAACC,UAAU,EAAEC,MAAM,EAAE;EAC3D,OAAON,cAAc,CAACK,UAAU,EAAE;IAAEV,OAAO,EAAEW;EAAO,CAAC,CAAC;AACxD;;AAEA;AACA,OAAO,eAAeC,sBAAsBA,CAACF,UAAU,EAAE;EACvD,OAAOL,cAAc,CAACK,UAAU,EAAE;IAAEV,OAAO,EAAE;EAAK,CAAC,CAAC;AACtD;;AAEA;AACA,OAAO,eAAea,cAAcA,CAACP,EAAE,EAAE;EACvC,MAAM;IAAEZ;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CAC7BK,IAAI,CAAC,WAAW,CAAC,CACjBmB,MAAM,CAAC,CAAC,CACRjB,EAAE,CAAC,IAAI,EAAES,EAAE,CAAC;EACf,IAAIZ,KAAK,EAAE,MAAMA,KAAK;AACxB;;AAEA;AACA,OAAO,eAAeqB,aAAaA,CAACvB,eAAe,EAAE;EACnD,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,iBAAiB,EAAEL,eAAe,CAAC;EACzC,IAAIE,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}