{"ast":null,"code":"var _jsxFileName = \"/Users/markgiblin/Desktop/layrbase/src/pages/legal/components/Contracts.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { FolderIcon, DocumentTextIcon, MagnifyingGlassIcon, PlusIcon, ArrowUpTrayIcon, TrashIcon, EllipsisVerticalIcon, PencilSquareIcon, DocumentDuplicateIcon } from '@heroicons/react/24/outline';\nimport { getContracts, getContractFolders, deleteContract, createContractFolder, createContract, uploadContractPDF, debugRls, deleteContractFile, duplicateContract, updateContract } from '../../../services/legalService';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DropdownMenu = ({\n  contract,\n  onEdit,\n  onDelete,\n  onDuplicate\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, [menuRef]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative inline-block text-left\",\n    ref: menuRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsOpen(!isOpen),\n      className: \"inline-flex items-center justify-center w-8 h-8 text-gray-500 rounded-full hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",\n      children: /*#__PURE__*/_jsxDEV(EllipsisVerticalIcon, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-1\",\n        role: \"menu\",\n        \"aria-orientation\": \"vertical\",\n        \"aria-labelledby\": \"options-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: e => {\n            e.preventDefault();\n            onEdit(contract);\n            setIsOpen(false);\n          },\n          className: \"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",\n          role: \"menuitem\",\n          children: [/*#__PURE__*/_jsxDEV(PencilSquareIcon, {\n            className: \"w-4 h-4 mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 15\n          }, this), \"Move to Folder\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: e => {\n            e.preventDefault();\n            onDuplicate(contract);\n            setIsOpen(false);\n          },\n          className: \"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",\n          role: \"menuitem\",\n          children: [/*#__PURE__*/_jsxDEV(DocumentDuplicateIcon, {\n            className: \"w-4 h-4 mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 15\n          }, this), \"Duplicate\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: e => {\n            e.preventDefault();\n            onDelete(contract);\n            setIsOpen(false);\n          },\n          className: \"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-100\",\n          role: \"menuitem\",\n          children: [/*#__PURE__*/_jsxDEV(TrashIcon, {\n            className: \"w-4 h-4 mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), \"Delete\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n};\n_s(DropdownMenu, \"yIsVPXmGJnWJAXf4YKobPzEQ+oo=\");\n_c = DropdownMenu;\nconst MoveToFolderModal = ({\n  show,\n  onClose,\n  onSave,\n  folders,\n  saving\n}) => {\n  _s2();\n  const [selectedFolderId, setSelectedFolderId] = useState('');\n  useEffect(() => {\n    if (show) {\n      setSelectedFolderId('');\n    }\n  }, [show]);\n  const handleSave = () => {\n    onSave(selectedFolderId || null);\n  };\n  if (!show) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Move Contract to Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Select a new folder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedFolderId,\n            onChange: e => setSelectedFolderId(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"-- None (Remove from folder) --\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), folders.map(folder => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: folder.id,\n              children: folder.name\n            }, folder.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n            disabled: saving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSave,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\",\n            disabled: saving,\n            children: saving ? 'Saving...' : 'Save'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s2(MoveToFolderModal, \"zL7nFHt9AoorZLGhPzjGXjZStCw=\");\n_c2 = MoveToFolderModal;\nconst UploadModal = ({\n  showModal,\n  onClose,\n  folders,\n  onUpload,\n  saving\n}) => {\n  _s3();\n  const [uploadData, setUploadData] = useState({\n    name: '',\n    description: '',\n    folderId: '',\n    file: null\n  });\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file && file.type === 'application/pdf') {\n      setUploadData({\n        ...uploadData,\n        file\n      });\n    } else {\n      alert('Please select a PDF file');\n      e.target.value = '';\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onUpload(uploadData);\n  };\n  if (!showModal) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Upload Contract\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Contract Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: uploadData.name,\n            onChange: e => setUploadData({\n              ...uploadData,\n              name: e.target.value\n            }),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: uploadData.description,\n            onChange: e => setUploadData({\n              ...uploadData,\n              description: e.target.value\n            }),\n            rows: 3,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Folder (Optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: uploadData.folderId,\n            onChange: e => setUploadData({\n              ...uploadData,\n              folderId: e.target.value\n            }),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select a folder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), folders.map(folder => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: folder.id,\n              children: folder.name\n            }, folder.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"PDF File *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".pdf\",\n            onChange: handleFileChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n            disabled: saving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: saving,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\",\n            children: saving ? 'Uploading...' : 'Upload Contract'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n_s3(UploadModal, \"B9SAzq3NQE511MxTuZnqXsCZSPA=\");\n_c3 = UploadModal;\nconst FolderModal = ({\n  showModal,\n  onClose,\n  onCreate,\n  saving\n}) => {\n  _s4();\n  const [newFolder, setNewFolder] = useState({\n    name: '',\n    description: ''\n  });\n  const handleSubmit = e => {\n    e.preventDefault();\n    onCreate(newFolder);\n  };\n  if (!showModal) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 w-full max-w-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Create New Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Folder Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newFolder.name,\n            onChange: e => setNewFolder({\n              ...newFolder,\n              name: e.target.value\n            }),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: newFolder.description,\n            onChange: e => setNewFolder({\n              ...newFolder,\n              description: e.target.value\n            }),\n            rows: 3,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\",\n            disabled: saving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: saving,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\",\n            children: saving ? 'Creating...' : 'Create Folder'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n};\n_s4(FolderModal, \"RiI61vA/wKkZ9aFmEoSBBWcr7bs=\");\n_c4 = FolderModal;\nconst Contracts = () => {\n  _s5();\n  const [contracts, setContracts] = useState([]);\n  const [folders, setFolders] = useState([]);\n  const [selectedFolder, setSelectedFolder] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showFolderModal, setShowFolderModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const {\n    currentOrganization\n  } = useAuth();\n  const [showMoveToFolderModal, setShowMoveToFolderModal] = useState(false);\n  const [selectedContract, setSelectedContract] = useState(null);\n  useEffect(() => {\n    if (currentOrganization) {\n      loadContracts();\n      loadFolders();\n    }\n  }, [currentOrganization]);\n  const loadContracts = async () => {\n    setLoading(true);\n    try {\n      if (!currentOrganization) return;\n      const data = await getContracts(currentOrganization.organization_id);\n      setContracts(data);\n    } catch (error) {\n      console.error('Error loading contracts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadFolders = async () => {\n    try {\n      if (!currentOrganization) return;\n      const data = await getContractFolders(currentOrganization.organization_id);\n      setFolders(data);\n    } catch (error) {\n      console.error('Error loading folders:', error);\n    }\n  };\n  const handleDeleteContract = async contract => {\n    if (!contract || !contract.id) return;\n    if (window.confirm(`Are you sure you want to delete the contract \"${contract.name}\"?`)) {\n      try {\n        if (contract.pdf_file_path) {\n          await deleteContractFile(contract.pdf_file_path);\n        }\n        await deleteContract(contract.id);\n        await loadContracts();\n        alert('Contract deleted successfully.');\n      } catch (error) {\n        console.error('Error deleting contract:', error);\n        alert('Error deleting contract. Please check the console for details.');\n      }\n    }\n  };\n  const handleDuplicateContract = async contract => {\n    if (!contract || !contract.id) return;\n    if (window.confirm(`Are you sure you want to duplicate the contract \"${contract.name}\"?`)) {\n      try {\n        await duplicateContract(contract.id);\n        await loadContracts();\n        alert('Contract duplicated successfully.');\n      } catch (error) {\n        console.error('Error duplicating contract:', error);\n        alert('Error duplicating contract. Please check the console for details.');\n      }\n    }\n  };\n  const handleShowMoveToFolderModal = contract => {\n    setSelectedContract(contract);\n    setShowMoveToFolderModal(true);\n  };\n  const handleMoveContract = async newFolderId => {\n    if (!selectedContract) return;\n    setSaving(true);\n    try {\n      await updateContract(selectedContract.id, {\n        folder_id: newFolderId\n      });\n      await loadContracts();\n      setShowMoveToFolderModal(false);\n      setSelectedContract(null);\n    } catch (error) {\n      console.error(\"Error moving contract:\", error);\n      alert(\"Failed to move contract. Please try again.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleUploadContract = async uploadData => {\n    if (!uploadData.name || !uploadData.file) {\n      alert('Please fill in the contract name and select a file');\n      return;\n    }\n    setSaving(true);\n    try {\n      if (!currentOrganization || !currentOrganization.organization_id) {\n        throw new Error(\"No organization selected.\");\n      }\n      const contractRecord = {\n        name: uploadData.name,\n        description: uploadData.description,\n        folder_id: uploadData.folderId || null\n      };\n      const newContract = await createContract(contractRecord, currentOrganization.organization_id);\n      if (!newContract || !newContract.id) {\n        throw new Error(\"Failed to create contract record or get an ID back.\");\n      }\n      await uploadContractPDF(uploadData.file, newContract.id, currentOrganization.organization_id);\n      setShowUploadModal(false);\n      await loadContracts();\n      alert('Contract uploaded successfully!');\n    } catch (error) {\n      console.error('Error uploading contract:', error);\n      alert(`Error uploading contract: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleCreateFolder = async newFolder => {\n    setSaving(true);\n    try {\n      await createContractFolder(newFolder, currentOrganization.organization_id);\n      await loadFolders();\n      setShowFolderModal(false);\n    } catch (error) {\n      console.error('Error creating folder:', error);\n    }\n    setSaving(false);\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'draft':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'active':\n        return 'bg-green-100 text-green-800';\n      case 'expired':\n        return 'bg-gray-100 text-gray-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-64 bg-gray-50 p-4 border-r border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"Folders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            onClick: e => {\n              e.preventDefault();\n              setSelectedFolder('all');\n            },\n            className: `block px-3 py-2 rounded-md text-sm font-medium ${selectedFolder === 'all' ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100'}`,\n            children: \"All Contracts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), folders.map(folder => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            onClick: e => {\n              e.preventDefault();\n              setSelectedFolder(folder.id);\n            },\n            className: `flex items-center px-3 py-2 rounded-md text-sm font-medium ${selectedFolder === folder.id ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100'}`,\n            children: [/*#__PURE__*/_jsxDEV(FolderIcon, {\n              className: \"h-5 w-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this), folder.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)\n        }, folder.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowFolderModal(true),\n        className: \"mt-4 w-full flex items-center justify-center px-4 py-2 border-2 border-dashed border-gray-300 rounded-md text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",\n        children: [/*#__PURE__*/_jsxDEV(PlusIcon, {\n          className: \"h-5 w-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), \"New Folder\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full max-w-xs\",\n          children: [/*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n            className: \"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search contracts...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowUploadModal(true),\n          className: \"flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowUpTrayIcon, {\n            className: \"h-5 w-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), \"Upload Contract\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-10\",\n        children: \"Loading contracts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full divide-y divide-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-50\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n              children: \"Created\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"bg-white divide-y divide-gray-200\",\n          children: contracts.filter(contract => selectedFolder === 'all' || contract.folder_id === selectedFolder).filter(contract => searchTerm === '' || contract.name.toLowerCase().includes(searchTerm.toLowerCase())).map(contract => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n              children: contract.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n              children: new Date(contract.created_at).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(contract.status)}`,\n                children: contract.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",\n              children: /*#__PURE__*/_jsxDEV(DropdownMenu, {\n                contract: contract,\n                onDelete: handleDeleteContract,\n                onEdit: handleShowMoveToFolderModal,\n                onDuplicate: handleDuplicateContract\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 19\n            }, this)]\n          }, contract.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UploadModal, {\n      showModal: showUploadModal,\n      onClose: () => setShowUploadModal(false),\n      folders: folders,\n      onUpload: handleUploadContract,\n      saving: saving\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FolderModal, {\n      showModal: showFolderModal,\n      onClose: () => setShowFolderModal(false),\n      onCreate: handleCreateFolder,\n      saving: saving\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MoveToFolderModal, {\n      show: showMoveToFolderModal,\n      onClose: () => setShowMoveToFolderModal(false),\n      onSave: handleMoveContract,\n      folders: folders,\n      saving: saving\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n};\n_s5(Contracts, \"K+pPs/SLrM5Eapy08yiXDMXv/e4=\", false, function () {\n  return [useAuth];\n});\n_c5 = Contracts;\nexport default Contracts;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"DropdownMenu\");\n$RefreshReg$(_c2, \"MoveToFolderModal\");\n$RefreshReg$(_c3, \"UploadModal\");\n$RefreshReg$(_c4, \"FolderModal\");\n$RefreshReg$(_c5, \"Contracts\");","map":{"version":3,"names":["React","useState","useEffect","useRef","FolderIcon","DocumentTextIcon","MagnifyingGlassIcon","PlusIcon","ArrowUpTrayIcon","TrashIcon","EllipsisVerticalIcon","PencilSquareIcon","DocumentDuplicateIcon","getContracts","getContractFolders","deleteContract","createContractFolder","createContract","uploadContractPDF","debugRls","deleteContractFile","duplicateContract","updateContract","useAuth","jsxDEV","_jsxDEV","DropdownMenu","contract","onEdit","onDelete","onDuplicate","_s","isOpen","setIsOpen","menuRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","ref","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","role","href","e","preventDefault","_c","MoveToFolderModal","show","onClose","onSave","folders","saving","_s2","selectedFolderId","setSelectedFolderId","handleSave","value","onChange","map","folder","id","name","type","disabled","_c2","UploadModal","showModal","onUpload","_s3","uploadData","setUploadData","description","folderId","file","handleFileChange","files","alert","handleSubmit","onSubmit","required","rows","accept","_c3","FolderModal","onCreate","_s4","newFolder","setNewFolder","_c4","Contracts","_s5","contracts","setContracts","setFolders","selectedFolder","setSelectedFolder","searchTerm","setSearchTerm","loading","setLoading","showUploadModal","setShowUploadModal","showFolderModal","setShowFolderModal","setSaving","currentOrganization","showMoveToFolderModal","setShowMoveToFolderModal","selectedContract","setSelectedContract","loadContracts","loadFolders","data","organization_id","error","console","handleDeleteContract","window","confirm","pdf_file_path","handleDuplicateContract","handleShowMoveToFolderModal","handleMoveContract","newFolderId","folder_id","handleUploadContract","Error","contractRecord","newContract","message","handleCreateFolder","getStatusColor","status","placeholder","filter","toLowerCase","includes","Date","created_at","toLocaleDateString","_c5","$RefreshReg$"],"sources":["/Users/markgiblin/Desktop/layrbase/src/pages/legal/components/Contracts.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FolderIcon, DocumentTextIcon, MagnifyingGlassIcon, PlusIcon, ArrowUpTrayIcon, TrashIcon, EllipsisVerticalIcon, PencilSquareIcon, DocumentDuplicateIcon } from '@heroicons/react/24/outline';\nimport { getContracts, getContractFolders, deleteContract, createContractFolder, createContract, uploadContractPDF, debugRls, deleteContractFile, duplicateContract, updateContract } from '../../../services/legalService';\nimport { useAuth } from '../../../contexts/AuthContext';\n\nconst DropdownMenu = ({ contract, onEdit, onDelete, onDuplicate }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, [menuRef]);\n\n  return (\n    <div className=\"relative inline-block text-left\" ref={menuRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"inline-flex items-center justify-center w-8 h-8 text-gray-500 rounded-full hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n      >\n        <EllipsisVerticalIcon className=\"w-5 h-5\" />\n      </button>\n\n      {isOpen && (\n        <div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10\">\n          <div className=\"py-1\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"options-menu\">\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); onEdit(contract); setIsOpen(false); }} className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" role=\"menuitem\">\n              <PencilSquareIcon className=\"w-4 h-4 mr-3\" />\n              Move to Folder\n            </a>\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); onDuplicate(contract); setIsOpen(false); }} className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\" role=\"menuitem\">\n              <DocumentDuplicateIcon className=\"w-4 h-4 mr-3\" />\n              Duplicate\n            </a>\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); onDelete(contract); setIsOpen(false); }} className=\"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-100\" role=\"menuitem\">\n              <TrashIcon className=\"w-4 h-4 mr-3\" />\n              Delete\n            </a>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst MoveToFolderModal = ({ show, onClose, onSave, folders, saving }) => {\n  const [selectedFolderId, setSelectedFolderId] = useState('');\n\n  useEffect(() => {\n    if (show) {\n      setSelectedFolderId('');\n    }\n  }, [show]);\n\n  const handleSave = () => {\n    onSave(selectedFolderId || null);\n  };\n\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Move Contract to Folder</h3>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Select a new folder</label>\n            <select\n              value={selectedFolderId}\n              onChange={(e) => setSelectedFolderId(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"\">-- None (Remove from folder) --</option>\n              {folders.map(folder => (\n                <option key={folder.id} value={folder.id}>{folder.name}</option>\n              ))}\n            </select>\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\" disabled={saving}>\n              Cancel\n            </button>\n            <button type=\"button\" onClick={handleSave} className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\" disabled={saving}>\n              {saving ? 'Saving...' : 'Save'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst UploadModal = ({ showModal, onClose, folders, onUpload, saving }) => {\n  const [uploadData, setUploadData] = useState({ name: '', description: '', folderId: '', file: null });\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file && file.type === 'application/pdf') {\n      setUploadData({ ...uploadData, file });\n    } else {\n      alert('Please select a PDF file');\n      e.target.value = '';\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpload(uploadData);\n  };\n\n  if (!showModal) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Upload Contract</h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Contract Name *</label>\n            <input\n              type=\"text\"\n              value={uploadData.name}\n              onChange={(e) => setUploadData({ ...uploadData, name: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n            <textarea\n              value={uploadData.description}\n              onChange={(e) => setUploadData({ ...uploadData, description: e.target.value })}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Folder (Optional)</label>\n            <select\n              value={uploadData.folderId}\n              onChange={(e) => setUploadData({ ...uploadData, folderId: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"\">Select a folder</option>\n              {folders.map(folder => (\n                <option key={folder.id} value={folder.id}>{folder.name}</option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">PDF File *</label>\n            <input\n              type=\"file\"\n              accept=\".pdf\"\n              onChange={handleFileChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\"\n              disabled={saving}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {saving ? 'Uploading...' : 'Upload Contract'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst FolderModal = ({ showModal, onClose, onCreate, saving }) => {\n  const [newFolder, setNewFolder] = useState({ name: '', description: '' });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onCreate(newFolder);\n  };\n  \n  if (!showModal) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Create New Folder</h3>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Folder Name *</label>\n            <input\n              type=\"text\"\n              value={newFolder.name}\n              onChange={(e) => setNewFolder({ ...newFolder, name: e.target.value })}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n            <textarea\n              value={newFolder.description}\n              onChange={(e) => setNewFolder({ ...newFolder, description: e.target.value })}\n              rows={3}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200\"\n              disabled={saving}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {saving ? 'Creating...' : 'Create Folder'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst Contracts = () => {\n  const [contracts, setContracts] = useState([]);\n  const [folders, setFolders] = useState([]);\n  const [selectedFolder, setSelectedFolder] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showFolderModal, setShowFolderModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const { currentOrganization } = useAuth();\n  const [showMoveToFolderModal, setShowMoveToFolderModal] = useState(false);\n  const [selectedContract, setSelectedContract] = useState(null);\n\n  useEffect(() => {\n    if (currentOrganization) {\n      loadContracts();\n      loadFolders();\n    }\n  }, [currentOrganization]);\n\n  const loadContracts = async () => {\n    setLoading(true);\n    try {\n      if (!currentOrganization) return;\n      const data = await getContracts(currentOrganization.organization_id);\n      setContracts(data);\n    } catch (error) {\n      console.error('Error loading contracts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadFolders = async () => {\n    try {\n      if (!currentOrganization) return;\n      const data = await getContractFolders(currentOrganization.organization_id);\n      setFolders(data);\n    } catch (error) {\n      console.error('Error loading folders:', error);\n    }\n  };\n\n  const handleDeleteContract = async (contract) => {\n    if (!contract || !contract.id) return;\n    if (window.confirm(`Are you sure you want to delete the contract \"${contract.name}\"?`)) {\n      try {\n        if (contract.pdf_file_path) {\n          await deleteContractFile(contract.pdf_file_path);\n        }\n        await deleteContract(contract.id);\n        await loadContracts();\n        alert('Contract deleted successfully.');\n      } catch (error) {\n        console.error('Error deleting contract:', error);\n        alert('Error deleting contract. Please check the console for details.');\n      }\n    }\n  };\n\n  const handleDuplicateContract = async (contract) => {\n    if (!contract || !contract.id) return;\n    if (window.confirm(`Are you sure you want to duplicate the contract \"${contract.name}\"?`)) {\n      try {\n        await duplicateContract(contract.id);\n        await loadContracts();\n        alert('Contract duplicated successfully.');\n      } catch (error) {\n        console.error('Error duplicating contract:', error);\n        alert('Error duplicating contract. Please check the console for details.');\n      }\n    }\n  };\n\n  const handleShowMoveToFolderModal = (contract) => {\n    setSelectedContract(contract);\n    setShowMoveToFolderModal(true);\n  };\n\n  const handleMoveContract = async (newFolderId) => {\n    if (!selectedContract) return;\n\n    setSaving(true);\n    try {\n      await updateContract(selectedContract.id, { folder_id: newFolderId });\n      await loadContracts();\n      setShowMoveToFolderModal(false);\n      setSelectedContract(null);\n    } catch (error) {\n      console.error(\"Error moving contract:\", error);\n      alert(\"Failed to move contract. Please try again.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleUploadContract = async (uploadData) => {\n    if (!uploadData.name || !uploadData.file) {\n      alert('Please fill in the contract name and select a file');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      if (!currentOrganization || !currentOrganization.organization_id) {\n        throw new Error(\"No organization selected.\");\n      }\n\n      const contractRecord = {\n        name: uploadData.name,\n        description: uploadData.description,\n        folder_id: uploadData.folderId || null,\n      };\n\n      const newContract = await createContract(contractRecord, currentOrganization.organization_id);\n      \n      if (!newContract || !newContract.id) {\n        throw new Error(\"Failed to create contract record or get an ID back.\");\n      }\n\n      await uploadContractPDF(uploadData.file, newContract.id, currentOrganization.organization_id);\n      \n      setShowUploadModal(false);\n      await loadContracts();\n      alert('Contract uploaded successfully!');\n    } catch (error) {\n      console.error('Error uploading contract:', error);\n      alert(`Error uploading contract: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleCreateFolder = async (newFolder) => {\n    setSaving(true);\n    try {\n      await createContractFolder(newFolder, currentOrganization.organization_id);\n      await loadFolders();\n      setShowFolderModal(false);\n    } catch (error) {\n      console.error('Error creating folder:', error);\n    }\n    setSaving(false);\n  };\n  \n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'draft': return 'bg-yellow-100 text-yellow-800';\n      case 'active': return 'bg-green-100 text-green-800';\n      case 'expired': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"flex h-full\">\n      <div className=\"w-64 bg-gray-50 p-4 border-r border-gray-200\">\n        <h2 className=\"text-lg font-semibold mb-4\">Folders</h2>\n        <ul className=\"space-y-1\">\n          <li>\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); setSelectedFolder('all'); }} className={`block px-3 py-2 rounded-md text-sm font-medium ${selectedFolder === 'all' ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100'}`}>\n              All Contracts\n            </a>\n          </li>\n          {folders.map(folder => (\n            <li key={folder.id}>\n              <a href=\"#\" onClick={(e) => { e.preventDefault(); setSelectedFolder(folder.id); }} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${selectedFolder === folder.id ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100'}`}>\n                <FolderIcon className=\"h-5 w-5 mr-2\" />\n                {folder.name}\n              </a>\n            </li>\n          ))}\n        </ul>\n        <button \n          onClick={() => setShowFolderModal(true)} \n          className=\"mt-4 w-full flex items-center justify-center px-4 py-2 border-2 border-dashed border-gray-300 rounded-md text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n        >\n          <PlusIcon className=\"h-5 w-5 mr-2\" />\n          New Folder\n        </button>\n      </div>\n\n      <div className=\"flex-1 p-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"relative w-full max-w-xs\">\n            <MagnifyingGlassIcon className=\"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search contracts...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md\"\n            />\n          </div>\n          <button onClick={() => setShowUploadModal(true)} className=\"flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\">\n            <ArrowUpTrayIcon className=\"h-5 w-5 mr-2\" />\n            Upload Contract\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-10\">Loading contracts...</div>\n        ) : (\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {contracts\n                .filter(contract => selectedFolder === 'all' || contract.folder_id === selectedFolder)\n                .filter(contract => searchTerm === '' || contract.name.toLowerCase().includes(searchTerm.toLowerCase()))\n                .map(contract => (\n                <tr key={contract.id}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{contract.name}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{new Date(contract.created_at).toLocaleDateString()}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(contract.status)}`}>\n                      {contract.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <DropdownMenu\n                      contract={contract}\n                      onDelete={handleDeleteContract}\n                      onEdit={handleShowMoveToFolderModal}\n                      onDuplicate={handleDuplicateContract}\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n      \n      <UploadModal \n        showModal={showUploadModal}\n        onClose={() => setShowUploadModal(false)}\n        folders={folders}\n        onUpload={handleUploadContract}\n        saving={saving}\n      />\n      <FolderModal\n        showModal={showFolderModal}\n        onClose={() => setShowFolderModal(false)}\n        onCreate={handleCreateFolder}\n        saving={saving}\n      />\n      <MoveToFolderModal \n        show={showMoveToFolderModal}\n        onClose={() => setShowMoveToFolderModal(false)}\n        onSave={handleMoveContract}\n        folders={folders}\n        saving={saving}\n      />\n    </div>\n  );\n};\n\nexport default Contracts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}